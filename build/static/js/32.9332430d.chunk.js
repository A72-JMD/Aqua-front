(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[32],{1385:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return S}));var n=t(4),c=t.n(n),l=t(63),o=t(19),r=t(85),s=t(915),i=t(982),m=t(954),d=t(931),u=t(932),E=t(1386),p=t(955),g=t(956),f=t(937),h=t(957),y=t(958),b=t(924),N=t(925),I=t(917),v=t(959),w=t(55);function S(e){const[a,t]=Object(n.useState)(!1),[S,T]=Object(n.useState)(!1),[C,P]=Object(n.useState)(!1),[L,k]=Object(n.useState)(""),[x,A]=Object(i.a)({email:"",password:"",mfaTOTPCode:""});async function _(e){e.preventDefault(),t(!0);try{const e=await l.b.signIn(x.email,x.password);k(e.username),t(!1),T(!0)}catch(a){alert(a.message),t(!1)}}async function O(e){e.preventDefault(),t(!0),await j(x.mfaVerificationCode).then(e=>{try{P(e)}catch(a){alert("Waiting for Reece to fix the Lambda :)"),alert(JSON.stringify(a.message))}}),t(!1)}const j=async()=>{try{var e=!1,a=await l.b.signIn(x.email,x.password);await l.b;var t={session:a.Session,client_id:w.a.cognito.APP_CLIENT_ID,username:L,code:x.mfaTOTPCode};let n="Fiji-Dev",c="/mfavalidator",o={headers:{"Content-Type":"application/json"},body:t};console.log("AQUI!!!"),await l.a.post(n,c,o).then(a=>{localStorage.setItem("CognitoIdentityServiceProvider.".concat(w.a.cognito.APP_CLIENT_ID,".").concat(L,".accessToken"),a.body.AuthenticationResult.AccessToken),localStorage.setItem("CognitoIdentityServiceProvider.".concat(w.a.cognito.APP_CLIENT_ID,".").concat(L,".clockDrift"),0),localStorage.setItem("CognitoIdentityServiceProvider.".concat(w.a.cognito.APP_CLIENT_ID,".").concat(L,".idToken"),a.body.AuthenticationResult.IdToken),localStorage.setItem("CognitoIdentityServiceProvider.".concat(w.a.cognito.APP_CLIENT_ID,".").concat(L,".refreshToken"),a.body.AuthenticationResult.RefreshToken),localStorage.setItem("CognitoIdentityServiceProvider.".concat(w.a.cognito.APP_CLIENT_ID,".LastAuthUser"),L),localStorage.setItem("amplify-signin-with-hostedUI",!1),e=!0})}catch(n){"Request failed with status code 502"===n.message||alert(JSON.stringify(n))}return e};return c.a.createElement("div",{className:""},S?C?(window.location.reload(),c.a.createElement(o.c,{to:"/Dashboardtest"})):c.a.createElement("div",{className:"app flex-row align-items-center"},c.a.createElement(m.a,null,c.a.createElement(d.a,{className:"justify-content-center"},c.a.createElement(u.a,{md:"9",lg:"7",xl:"6"},c.a.createElement(p.a,{className:"mx-4"},c.a.createElement(g.a,{className:"p-4"},c.a.createElement(f.a,{onSubmit:O},c.a.createElement("h1",null,"MFA"),c.a.createElement("p",null,"Enter the value in the field below to verify the account."),c.a.createElement(h.a,{className:"mb-3"},c.a.createElement(y.a,{addonType:"prepend"},c.a.createElement(b.a,null,"#")),c.a.createElement(N.a,{id:"mfaTOTPCode",type:"tel",placeholder:"MFA Code",onChange:A,autoFocus:!0})),c.a.createElement(s.a,{color:"success",block:!0,isLoading:a,disabled:a},"Enter Code"))),c.a.createElement(v.a,{className:"p-4"})))))):c.a.createElement("div",{className:"app flex-row align-items-center"},c.a.createElement(m.a,null,c.a.createElement(d.a,{className:"justify-content-center"},c.a.createElement(u.a,{md:"8"},c.a.createElement(E.a,null,c.a.createElement(p.a,{className:"p-4"},c.a.createElement(g.a,null,c.a.createElement(f.a,{onSubmit:_},c.a.createElement("h1",null,"Login"),c.a.createElement("p",{className:"text-muted"},"Sign In to your account"),c.a.createElement(h.a,{className:"mb-3"},c.a.createElement(y.a,{addonType:"prepend"},c.a.createElement(b.a,null,c.a.createElement("i",{className:"icon-user"}))),c.a.createElement(N.a,{id:"email",autoFocus:!0,type:"email",placeholder:"email",value:x.email,onChange:A})),c.a.createElement(h.a,{className:"mb-4"},c.a.createElement(y.a,{addonType:"prepend"},c.a.createElement(b.a,null,c.a.createElement("i",{className:"icon-lock"}))),c.a.createElement(N.a,{id:"password",type:"password",placeholder:"Password",value:x.password,onChange:A})),c.a.createElement(d.a,null,c.a.createElement(u.a,{xs:"6"},c.a.createElement(s.a,{block:!0,color:"primary",type:"submit",isLoading:a,disabled:!(x.email.length>0&&x.password.length>0),className:"px-4"},"Login")),c.a.createElement(u.a,{xs:"6",className:"text-right"},c.a.createElement(I.a,{color:"link",className:"px-0"},"Forgot password?")))))),c.a.createElement(p.a,{className:"text-white bg-primary py-5 d-md-down-none",style:{width:"44%"}},c.a.createElement(g.a,{className:"text-center"},c.a.createElement("div",null,c.a.createElement("h2",null,"Sign up"),c.a.createElement("p",null,"Register your user."),c.a.createElement(r.Link,{to:"/register"},c.a.createElement(I.a,{color:"primary",className:"mt-3",active:!0,tabIndex:-1},"Register Now!")))))))))))}},915:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var n=t(4),c=t.n(n),l=t(917),o=t(1032);t(916);function r(e){let{isLoading:a,className:t="",disabled:n=!1,...r}=e;return c.a.createElement(l.a,Object.assign({className:"LoaderButton ".concat(t),disabled:n||a},r),a&&c.a.createElement(o.a,{size:"sm",color:"light"}),r.children)}},916:function(e,a,t){},982:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var n=t(4);function c(e){const[a,t]=Object(n.useState)(e);return[a,function(e){t({...a,[e.target.id]:e.target.value})}]}}}]);
//# sourceMappingURL=32.9332430d.chunk.js.map