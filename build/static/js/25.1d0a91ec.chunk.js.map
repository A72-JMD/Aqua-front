{"version":3,"sources":["views/Tickets/NewTicket.js","components/LoaderButton/LoaderButton.js","Common/Api/apiHelper.js","components/DynamicForm/DynamicForm.js"],"names":["NewTicket","props","isLoading","setIsLoading","useState","wasSuccess","setWasSuccess","createdTicket","setCreatedTicket","formTitle","setFormTitle","formModel","setForm","JiraProjectValues","C1","FP","VEN","c1TicketTypes","key","label","type","options","Task","fpTicketTypes","Improvement","Bug","Epic","jiraProjects","onChange","event","ttl","target","value","newForm","basicFormFields","Lowest","Low","Medium","High","Highest","userDetails","userInfo","email","required","useEffect","onLoad","async","handleSubmit","res","result","myInit","headers","Authorization","concat","Auth","currentSession","getIdToken","getJwtToken","body","API","post","e","alert","postData","model","toggleWasSuccess","show","arguments","length","undefined","React","createElement","className","Row","Col","xs","Card","CardHeader","CardBody","DynamicForm","title","onSubmit","CardFooter","Modal","isOpen","toggle","ModalHeader","ModalBody","ModalFooter","Button","color","onClick","dismissWasSuccess","LoaderButton","_ref","disabled","Object","assign","Spinner","size","children","apiGET","apiPath","authenticated","console","log","apiName","config","apiGateway","NAME","path","get","message","apiPOST","state","setState","doneBuildingModel","dependencies","visiblePage","setVisiblePage","maxPages","setMaxPages","minPage","setMinPage","file","useRef","validationRules","fetchData","stateTemp","preventDefault","formValues","map","m","keys","toString","performValidation","success","updateFieldValue","guid","newValue","index","findIndex","object","findFieldByKey","keyval","inputField","name","desiredValue","fieldObject","onRadioChange","onCheckboxChange","updateMultiFieldValue","selected","vals","push","filter","x","checked","onFileChange","current","files","fileName","attributes","fileExt","split","pop","fieldId","id","maxFileSize","presignedUrl","assessmentId","getPresignedUrl","fetch","method","then","response","json","nextPage","setPage","i","getInput","isChecked","keyName","Input","questionId","parent","renderSelect","fieldValue","defaultValue","renderInput","renderFileInput","fieldOrder","renderStatic","order","data-order","renderPagination","Pagination","listClassName","PaginationItem","PaginationLink","previous","prevPage","href","Array","page","active","next","renderTest","Fragment","sort","a","b","placeholder","questionRef","question_ref","c","validation","setValidationRules","setDependencyRules","FormGroup","row","md","Label","htmlFor","q_ref","check","renderRadio","selectedValues","includes","renderCheckbox","Form","noValidate","renderForm","pagination","paginatedModel","Set","category","cat","temp","cancelButton","cancelButtonText"],"mappings":"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","file":"static/js/25.1d0a91ec.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  CardHeader,\r\n  Col,\r\n  Row,\r\n  Modal,\r\n  ModalBody,\r\n  ModalFooter,\r\n  ModalHeader\r\n} from \"reactstrap\";\r\nimport { Auth, API } from \"aws-amplify\";\r\n\r\nimport DynamicForm from \"../../components/DynamicForm/DynamicForm\";\r\n\r\nfunction NewTicket(props) {\r\n  const [isLoading, setIsLoading] = useState(false); //eslint-disable-line\r\n  const [wasSuccess, setWasSuccess] = useState(false);\r\n  const [createdTicket, setCreatedTicket] = useState(\"\");\r\n  const [formTitle, setFormTitle] = useState(\"TestCustomerOne\");\r\n  const [formModel, setForm] = useState([]);\r\n\r\n  // #FakeItTilYouMakeIt\r\n  const updateFormTitle = ttl => {\r\n    setFormTitle(JiraProjectValues[ttl]);\r\n  };\r\n\r\n  const updateForm = event => {\r\n    updateFormTitle(event.target.value);\r\n    var newForm = [];\r\n\r\n    switch (event.target.value) {\r\n      case \"C1\":\r\n        newForm = [jiraProjects, c1TicketTypes, ...basicFormFields];\r\n        break;\r\n      case \"FP\":\r\n        newForm = [jiraProjects, fpTicketTypes, ...basicFormFields];\r\n        break;\r\n      case \"VEN\":\r\n        newForm = [jiraProjects, c1TicketTypes, ...basicFormFields];\r\n        break;\r\n      default:\r\n        newForm = [jiraProjects, c1TicketTypes, ...basicFormFields];\r\n        break;\r\n    }\r\n    setForm(newForm);\r\n  };\r\n\r\n  const TicketPriorityValues = {\r\n    Lowest: \"Lowest\",\r\n    Low: \"Low\",\r\n    Medium: \"Medium\",\r\n    High: \"High\",\r\n    Highest: \"Highest\"\r\n  };\r\n  const c1TicketTypeValues = { Task: \"Task\" };\r\n  const fpTicketTypeValues = {\r\n    Task: \"Task\",\r\n    \"New Feature\": \"New Feature\",\r\n    Improvement: \"Improvement\",\r\n    Bug: \"Bug\",\r\n    Epic: \"Epic\"\r\n  };\r\n  const JiraProjectValues = {\r\n    C1: \"TestCustomerOne\",\r\n    FP: \"Fortian Portal\",\r\n    VEN: \"Vendor Assessment\"\r\n  };\r\n  const c1TicketTypes = {\r\n    key: \"ticketType\",\r\n    label: \"Ticket Type\",\r\n    type: \"select\",\r\n    options: c1TicketTypeValues\r\n  };\r\n  const fpTicketTypes = {\r\n    key: \"ticketType\",\r\n    label: \"Ticket Type\",\r\n    type: \"select\",\r\n    options: fpTicketTypeValues\r\n  };\r\n  const jiraProjects = {\r\n    key: \"project\",\r\n    label: \"Project\",\r\n    type: \"select\",\r\n    options: JiraProjectValues,\r\n    onChange: updateForm\r\n  };\r\n\r\n  const basicFormFields = [\r\n    {\r\n      key: \"priority\",\r\n      label: \"Priority\",\r\n      type: \"select\",\r\n      options: TicketPriorityValues,\r\n      value: \"Medium\"\r\n    },\r\n    {\r\n      key: \"reporter\",\r\n      label: \"Reporter\",\r\n      type: \"static\",\r\n      value: props.userDetails.userInfo.email\r\n    },\r\n    {\r\n      key: \"summary\",\r\n      label: \"Ticket Summary\",\r\n      props: { required: true }\r\n    },\r\n    {\r\n      key: \"description\",\r\n      label: \"Ticket Description\",\r\n      type: \"textarea\",\r\n      props: { required: true }\r\n    }\r\n  ];\r\n\r\n  const newForm = [jiraProjects, c1TicketTypes, ...basicFormFields];\r\n\r\n  useEffect(() => {\r\n    onLoad();\r\n  }, []); //eslint-disable-line\r\n\r\n  const onLoad = async () => {\r\n    setForm(newForm);\r\n\r\n    //console.log(props.match.params.id); // Doesn't work for some reason ¯\\_(ツ)_/¯\r\n  };\r\n\r\n  const postData = async body => {\r\n    // console.log(\"posting\");\r\n    // console.log(body);\r\n    let result = \"\";\r\n    let apiName = \"Fiji-Dev\";\r\n    let path = \"/tickets/create\";\r\n    let myInit = {\r\n      headers: {\r\n        Authorization: `Bearer ${(await Auth.currentSession())\r\n          .getIdToken()\r\n          .getJwtToken()}`,\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n      },\r\n      body: { body }\r\n    };\r\n    try {\r\n      result = await API.post(apiName, path, myInit);\r\n    } catch (e) {\r\n      alert(e);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  const handleSubmit = async model => {\r\n    // console.log(\"submittedHere\");\r\n    // console.log(model);\r\n    setIsLoading(true);\r\n\r\n    var res = await postData(model);\r\n    // console.log(res);\r\n    setCreatedTicket(res[\"issueKey\"]);\r\n    // console.log(createdTicket);\r\n    toggleWasSuccess(true);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const toggleWasSuccess = (show = false) => {\r\n    setWasSuccess(show);\r\n  };\r\n  const dismissWasSuccess = () => {\r\n    setWasSuccess(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"animated fadeIn\">\r\n      <Row>\r\n        <Col xs=\"12\">\r\n          <Card>\r\n            <CardHeader>\r\n              <strong>Create New Ticket</strong>\r\n            </CardHeader>\r\n            <CardBody>\r\n              <Row>\r\n                <DynamicForm\r\n                  className=\"form\"\r\n                  title={formTitle}\r\n                  model={formModel}\r\n                  onSubmit={model => {\r\n                    handleSubmit(model);\r\n                  }}\r\n                />\r\n              </Row>\r\n            </CardBody>\r\n            <CardFooter></CardFooter>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n      <Modal\r\n        isOpen={wasSuccess}\r\n        toggle={toggleWasSuccess}\r\n        className=\"modal-success\"\r\n      >\r\n        <ModalHeader toggle={toggleWasSuccess}>Ticket submitted</ModalHeader>\r\n        <ModalBody>\r\n          Ticket was successfully submitted. Your reference number is:{\" \"}\r\n          {createdTicket}\r\n        </ModalBody>\r\n        <ModalFooter>\r\n          <Button color=\"secondary\" onClick={dismissWasSuccess}>\r\n            Ok\r\n          </Button>\r\n        </ModalFooter>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewTicket;\r\n","import React from \"react\";\r\nimport { Button, Spinner } from \"reactstrap\";\r\nimport \"./LoaderButton.css\";\r\n\r\nexport default function LoaderButton({\r\n  isLoading,\r\n  className = \"\",\r\n  disabled = false,\r\n  ...props\r\n}) {\r\n  return (\r\n    <Button\r\n      className={`LoaderButton ${className}`}\r\n      disabled={disabled || isLoading}\r\n      {...props}>\r\n      {isLoading && <Spinner size='sm' color='light' />}\r\n      {props.children}\r\n    </Button>\r\n  );\r\n}\r\n","import { Auth, API } from \"aws-amplify\";\r\n\r\nimport config from \"../../config\";\r\n\r\nexport async function apiGET(apiPath, authenticated = true) {\r\n  try {\r\n    console.log(\"Test Getting\");\r\n    let apiName = config.apiGateway.NAME;\r\n    let path = apiPath;\r\n    let myInit = authenticated\r\n      ? {\r\n          headers: {\r\n            Authorization: `Bearer ${(await Auth.currentSession())\r\n              .getIdToken()\r\n              .getJwtToken()}`\r\n          }\r\n        }\r\n      : \"\";\r\n    var result = await API.get(apiName, path, myInit);\r\n    console.log(\"GET result\");\r\n    console.log(result);\r\n  } catch (e) {\r\n    if (e.message === \"Request failed with status code 502\") {\r\n    } else if (e.message === \"Request failed with status code 400\") {\r\n      return null;\r\n    } else {\r\n      console.log(e);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n/// GET\r\n/// POST\r\nexport async function apiPOST(apiPath, body) {\r\n  try {\r\n    delete body.isLoading;\r\n    let apiName = config.apiGateway.NAME;\r\n    let path = apiPath;\r\n    let myInit = {\r\n      headers: {\r\n        Authorization: `Bearer ${(await Auth.currentSession())\r\n          .getIdToken()\r\n          .getJwtToken()}`\r\n      },\r\n      body\r\n    };\r\n    var result = await API.post(apiName, path, myInit);\r\n    console.log(\"POST result\");\r\n    console.log(result);\r\n  } catch (e) {\r\n    if (e.message === \"Request failed with status code 502\") {\r\n    } else {\r\n      console.log(\"POST ERROR\");\r\n      console.log(e);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n/// PUT\r\n\r\nexport async function apiPUT(apiPath, body) {\r\n  try {\r\n    delete body.isLoading;\r\n    let apiName = config.apiGateway.NAME;\r\n    let path = apiPath;\r\n    let myInit = {\r\n      headers: {\r\n        Authorization: `Bearer ${(await Auth.currentSession())\r\n          .getIdToken()\r\n          .getJwtToken()}`\r\n      },\r\n      body\r\n    };\r\n    var result = await API.put(apiName, path, myInit);\r\n    console.log(\"PUT result\");\r\n    console.log(result);\r\n  } catch (e) {\r\n    if (e.message === \"Request failed with status code 502\") {\r\n    } else {\r\n      console.log(\"PUT ERROR\");\r\n      console.log(e);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  CardHeader,\r\n  Col,\r\n  Form,\r\n  FormGroup,\r\n  Input,\r\n  Label,\r\n  Pagination,\r\n  PaginationItem,\r\n  PaginationLink\r\n} from \"reactstrap\";\r\n\r\nimport LoaderButton from \"../../components/LoaderButton/LoaderButton\";\r\nimport { apiGET } from \"../../Common/Api/apiHelper\";\r\n\r\nexport default function DynamicForm(props) {\r\n  const [state, setState] = useState({\r\n    isLoading: false,\r\n    doneBuildingModel: false,\r\n    dependencies: {},\r\n    formModel: {}\r\n  });\r\n  const [visiblePage, setVisiblePage] = useState(0);\r\n  const [maxPages, setMaxPages] = useState(0);\r\n\r\n  // const [validationSuccess, setValidationSuccess] = useState(false);\r\n  const [minPage, setMinPage] = useState(0); //eslint-disable-line\r\n\r\n  const file = useRef(null); // useRef will not trigger component rerender on change\r\n\r\n  var validationRules = [{}];\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      await onLoad();\r\n    };\r\n    fetchData();\r\n  }, []); //eslint-disable-line\r\n\r\n  // When the component loads, update state with any pre-filled values\r\n  const onLoad = () => {\r\n    // console.log(\"ON LOAD TRIGGERED\");\r\n    let model = props.model;\r\n    var stateTemp = { ...state };\r\n    console.log(\"JMD-\");\r\n\r\n    setVisiblePage(props.visiblePage ? props.visiblePage : 0);\r\n    setMaxPages(props.maxPages ? props.maxPages : 1);\r\n\r\n    stateTemp.formModel = model;\r\n\r\n    // console.log(\"DUMP: \", stateTemp.formModel);\r\n    stateTemp.doneBuildingModel = true;\r\n\r\n    setState({ ...stateTemp });\r\n  };\r\n\r\n  const performValidation = () => {\r\n    var success = true;\r\n    // console.log(\"validating...\");\r\n    try {\r\n      // console.log(\"validationRules\");\r\n      // console.log(validationRules);\r\n      // console.log(\"state\");\r\n      // console.log(state);\r\n      Object.keys(state.formModel).map(function(key) {\r\n        console.log(validationRules[key].required);\r\n\r\n        // TODO trigger validation message useful tot he specific field\r\n        if (validationRules[key].required && state.formModel[key].length <= 0) {\r\n          success = false;\r\n        }\r\n\r\n        if (state.formModel[key].length > 0) {\r\n          if (state.formModel[key].length < validationRules[key].length) {\r\n            success = false;\r\n          }\r\n        }\r\n      });\r\n\r\n      // validationRules.map((i, c) => {\r\n      //   console.log(i);\r\n      //   console.log(validationRules[i]);\r\n      //   if (validationRules[c][\"rules\"][\"required\"]) {\r\n      //     if (state[validationRules[c].field].length === 0) {\r\n      //       setValidationSuccess(false);\r\n      //     }\r\n      //   }\r\n      // });\r\n    } catch (e) {}\r\n    return success;\r\n  };\r\n\r\n  const setValidationRules = async model => {\r\n    // model.map((i, c) => {\r\n    //   console.log(Object.keys(model[c].validation));\r\n    //   console.log(Object.values(model[c].validation));\r\n    // });\r\n\r\n    model.map((i, c) => {\r\n      var key = model[c].key;\r\n      var x = {\r\n        //field: key,\r\n      };\r\n      validationRules[key] = {\r\n        ...model[c].validation\r\n      };\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async event => {\r\n    console.log(\"submitted\");\r\n    event.preventDefault();\r\n\r\n    let model = state.formModel;\r\n    let formValues = {};\r\n\r\n    model.map(m => {\r\n      if (m.options) {\r\n        formValues[m.key] = m.value || Object.keys(m.options)[0].toString();\r\n      } else {\r\n        formValues[m.key] = m.value || \"\";\r\n      }\r\n    });\r\n\r\n    if (performValidation()) {\r\n      setState({ ...state, isLoading: true });\r\n      if (props.onSubmit) props.onSubmit(formValues);\r\n      setState({ ...state, isLoading: false });\r\n      console.log(\"Validation Success\");\r\n    } else {\r\n      alert(\"Validation Failed\");\r\n    }\r\n  };\r\n\r\n  const updateMultiFieldValue = (guid, newValue, selected) => {\r\n    var stateTemp = { ...state };\r\n\r\n    var index = stateTemp.formModel.findIndex(object => {\r\n      return object.key === guid;\r\n    });\r\n\r\n    if (index > -1) {\r\n      var vals = [];\r\n      if (stateTemp.formModel[index][\"value\"] === \"\")\r\n        stateTemp.formModel[index][\"value\"] = vals;\r\n\r\n      vals = stateTemp.formModel[index][\"value\"];\r\n      if (selected) vals.push(newValue);\r\n      else vals = vals.filter(x => x !== newValue);\r\n\r\n      stateTemp.formModel[index][\"value\"] = vals;\r\n    } else console.log(\"Failed to find index in model\");\r\n\r\n    setState({ ...stateTemp });\r\n  };\r\n\r\n  const updateFieldValue = (guid, newValue) => {\r\n    var stateTemp = { ...state };\r\n\r\n    var index = stateTemp.formModel.findIndex(object => {\r\n      return object.key === guid;\r\n    });\r\n\r\n    if (index > -1) stateTemp.formModel[index][\"value\"] = newValue;\r\n    else console.log(\"Failed to find index in model\");\r\n\r\n    setState({ ...stateTemp });\r\n  };\r\n\r\n  function findFieldByKey(keyval) {\r\n    let index = state.formModel.findIndex(object => {\r\n      return object.key === keyval;\r\n    });\r\n\r\n    if (index > -1) return state.formModel[index];\r\n    else console.log(\"findFieldByKey() failed to find index\");\r\n    return null;\r\n  }\r\n\r\n  // Update local state, call parent onChange if any.\r\n  //TODO: CHANGE ALL TO USE ON CHANGE\r\n  const onChange = e => {\r\n    var inputField = e.target.name;\r\n    var desiredValue = e.target.value;\r\n    updateFieldValue(inputField, desiredValue);\r\n\r\n    var fieldObject = findFieldByKey(inputField);\r\n    if (fieldObject.onChange) {\r\n      fieldObject.onChange(e, state);\r\n    }\r\n  };\r\n\r\n  const onRadioChange = e => {\r\n    var inputField = e.target.name;\r\n    var desiredValue = e.target.value;\r\n    updateFieldValue(inputField, desiredValue);\r\n\r\n    var fieldObject = findFieldByKey(inputField);\r\n    if (fieldObject.onChange) {\r\n      fieldObject.onChange(e, state);\r\n    }\r\n  };\r\n\r\n  const onCheckboxChange = e => {\r\n    // console.log(\"e.target\");\r\n    // console.log(e.target);\r\n\r\n    var inputField = e.target.name;\r\n    var desiredValue = e.target.value;\r\n    var wasChecked = e.target.checked;\r\n    updateMultiFieldValue(inputField, desiredValue, wasChecked);\r\n\r\n    var fieldObject = findFieldByKey(inputField);\r\n    if (fieldObject.onChange) {\r\n      fieldObject.onChange(e, state);\r\n    }\r\n  };\r\n\r\n  const getPresignedUrl = async fileName => {\r\n    return apiGET(\r\n      `/files/presignedurl?fileName=${fileName}&assessment=${props.assessmentId}`\r\n    );\r\n  };\r\n\r\n  // Upload the file to S3\r\n  /// Validate the file input (file type, size etc...)\r\n  /// GET the presigned url\r\n  /// PUT the file using the presigned url\r\n  const onFileChange = async e => {\r\n    setState({ ...state, isLoading: true });\r\n    // console.log(\"e.target\");\r\n    // console.log(e.target);\r\n    // console.log(e.target.attributes[\"order\"].value);\r\n    file.current = e.target.files[0];\r\n    var fileName = e.target.attributes[\"order\"].value;\r\n    var fileExt = file.current.name.split(\".\").pop();\r\n    var fieldId = e.target.id;\r\n\r\n    // basic file validation to make sure it works.\r\n    var maxFileSize = 5000000;\r\n    // basic file size validation:\r\n    if (file.current && file.current.size > maxFileSize) {\r\n      alert(`Please pick a file smaller than ${maxFileSize / 1000000} MB.`);\r\n      return;\r\n    }\r\n\r\n    // Get a presigned url.\r\n    //console.log(\"Getting presigned url\");\r\n    var presignedUrl = await getPresignedUrl(`${fileName}.${fileExt}`);\r\n    //console.log(presignedUrl);\r\n\r\n    // upload the file.\r\n    try {\r\n      var fileTest = await fetch(presignedUrl[\"body\"], {\r\n        method: \"PUT\",\r\n        body: file.current,\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\"\r\n        }\r\n      }).then(response => response.json());\r\n\r\n      // console.log(\"fileTest\");\r\n      // console.log(fileTest);\r\n    } catch (e) {\r\n      if (e.message === \"Request failed with status code 502\") {\r\n        //toggleApiError502(true);\r\n      } else {\r\n        console.log(e);\r\n        //props.onLogout();\r\n      }\r\n    }\r\n\r\n    var stateTemp = { ...state };\r\n\r\n    updateFieldValue(fieldId, file.current.name);\r\n    //stateTemp.formModel[fieldId] = file.current.name;\r\n\r\n    setState({ ...stateTemp });\r\n\r\n    if (props.onSubmit) props.onSubmit(stateTemp);\r\n    setState({ ...state, isLoading: false });\r\n  };\r\n\r\n  const setDependencyRules = model => {\r\n    var stateTemp = { ...state };\r\n\r\n    model.map((m, c) => {\r\n      if (m.dependencies.length > 0) {\r\n        stateTemp[\"dependencies\"][m.key] = m.dependencies;\r\n      }\r\n    });\r\n  };\r\n\r\n  /// TODO: Implement hide/show dependent questions.\r\n  const hideField = () => {};\r\n\r\n  const showField = () => {};\r\n\r\n  /// Pagination functions\r\n\r\n  // Go to the next page\r\n  // Make sure that the next page exists before setting it.\r\n  const nextPage = e => {\r\n    e.preventDefault(); // Stop the form from submitting and triggering validation for now\r\n    // apparently ! for 'not' doesn't work in react ¯\\_(ツ)_/¯\r\n    if (visiblePage + 2 > maxPages) {\r\n      console.log(\r\n        `${visiblePage + 2} is greater than the max pages ${maxPages}`\r\n      );\r\n    } else {\r\n      setVisiblePage(visiblePage + 1);\r\n    }\r\n  };\r\n\r\n  // Go to the previous page.\r\n  // Make sure that the previous page exists before setting it.\r\n  const prevPage = e => {\r\n    e.preventDefault(); // Stop the form from submitting and triggering validation for now\r\n\r\n    if (visiblePage - 1 < minPage) {\r\n      console.log(`${visiblePage - 1} is less than the min pages ${minPage}`);\r\n    } else {\r\n      setVisiblePage(visiblePage - 1);\r\n    }\r\n  };\r\n\r\n  // Go to a specific page\r\n  // Make sure that the page exists before setting it.\r\n  const setPage = (e, i) => {\r\n    e.preventDefault(); // Stop the form from submitting and triggering validation for now\r\n\r\n    // console.log(\"setting the page\");\r\n    // console.log(`page: ${i}, min: ${minPage}, max:${maxPages}`);\r\n    if (i + 1 >= minPage && i + 1 <= maxPages) {\r\n      setVisiblePage(i);\r\n    } else {\r\n      console.log(`${i} is out of bounds.`);\r\n    }\r\n  };\r\n\r\n  /// Field render functions\r\n  const renderStatic = fieldValue => {\r\n    // console.log(\"Rendering Static\");\r\n    return <p className=\"form-control-static\">{fieldValue}</p>;\r\n  };\r\n\r\n  const renderCheckbox = (options, key, fieldValue = -1) => {\r\n    // console.log(\"Rendering Checkbox\");\r\n    var selectedValues = [];\r\n    var index = state.formModel.findIndex(object => {\r\n      return object.key === key;\r\n    });\r\n\r\n    if (index > -1) selectedValues = state.formModel[index][\"value\"];\r\n    else console.log(\"Failed to find index in model\");\r\n\r\n    return (\r\n      <span>\r\n        {Object.keys(options).map((keyName, i) => (\r\n          <FormGroup check className=\"checkbox\" key={`${i}checkboxformgroup`}>\r\n            <Input\r\n              className=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              id={`${key}_${keyName}`}\r\n              name={key}\r\n              value={keyName}\r\n              parent={key}\r\n              onChange={e => {\r\n                onCheckboxChange(e);\r\n              }}\r\n              checked={selectedValues.includes(keyName)}\r\n            />\r\n            <Label\r\n              check\r\n              className=\"form-check-label\"\r\n              htmlFor={`${key}_${keyName}`}\r\n            >\r\n              {options[keyName]}\r\n            </Label>\r\n          </FormGroup>\r\n        ))}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getInput = (isChecked, key, keyName) => {\r\n    if (isChecked === true)\r\n      return (\r\n        <Input\r\n          className=\"form-check-input\"\r\n          type=\"radio\"\r\n          id={`${key}_${keyName}`}\r\n          questionId={key}\r\n          name={key}\r\n          value={keyName}\r\n          parent={key}\r\n          onChange={e => {\r\n            onRadioChange(e);\r\n          }}\r\n          checked={true}\r\n        />\r\n      );\r\n    else\r\n      return (\r\n        <Input\r\n          className=\"form-check-input\"\r\n          type=\"radio\"\r\n          id={`${key}_${keyName}`}\r\n          questionId={key}\r\n          name={key}\r\n          value={keyName}\r\n          parent={key}\r\n          onChange={e => {\r\n            onRadioChange(e);\r\n          }}\r\n        />\r\n      );\r\n  };\r\n\r\n  const renderRadio = (options, key, q_ref, fieldValue = -1) => {\r\n    //console.log(\"Rendering Radio\");\r\n    // console.log(options);\r\n    // console.log(key);\r\n    //console.log(fieldValue);\r\n    return (\r\n      <span>\r\n        {Object.keys(options)\r\n          .sort((a, b) => a < b)\r\n          .map((keyName, i) => (\r\n            <FormGroup key={`${i}radioformgroup`} check className=\"radio\">\r\n              {getInput(keyName === fieldValue, key, keyName)}\r\n              <Label\r\n                check\r\n                className=\"form-check-label\"\r\n                htmlFor={`${key}_${keyName}`}\r\n              >\r\n                {options[keyName]}\r\n              </Label>\r\n            </FormGroup>\r\n          ))}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const renderSelect = (options, key, fieldValue) => {\r\n    // console.log(\"Rendering Select\");\r\n    return (\r\n      <div>\r\n        <Input\r\n          {...props}\r\n          type=\"select\"\r\n          id={key}\r\n          name={key}\r\n          key={`${key}input`}\r\n          defaultValue={fieldValue}\r\n          onChange={e => {\r\n            onChange(e);\r\n          }}\r\n          required\r\n          className=\"form-control\"\r\n        >\r\n          {Object.keys(options).map((keyName, i) => (\r\n            <option\r\n              key={`${i}selectOption`}\r\n              value={keyName}\r\n              selected={options[keyName] === fieldValue ? \"selected\" : \"\"}\r\n            >\r\n              {options[keyName]}\r\n            </option>\r\n          ))}\r\n        </Input>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderInput = (type, key, fieldValue) => {\r\n    // console.log(`Rendering Input ${type}`);\r\n    // console.log(state.dependencies[\"key\"]);\r\n    return (\r\n      <div>\r\n        <Input\r\n          {...props}\r\n          type={type}\r\n          id={key}\r\n          name={key}\r\n          key={`${key}input`}\r\n          defaultValue={fieldValue}\r\n          onChange={e => {\r\n            onChange(e);\r\n          }}\r\n          required\r\n          className=\"form-control\"\r\n        ></Input>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderFileInput = (type, key, fieldValue, fieldOrder) => {\r\n    // console.log(`Rendering Input ${type}`);\r\n    // console.log(state.dependencies[\"key\"]);\r\n    // console.log(\"fieldValueFile\");\r\n    // console.log(fieldValue);\r\n\r\n    var hasValue = fieldValue !== \"\";\r\n    return hasValue === true ? (\r\n      renderStatic(fieldValue)\r\n    ) : (\r\n      <div>\r\n        <Input\r\n          {...props}\r\n          type={type}\r\n          id={key}\r\n          name={key}\r\n          key={`${key}input`}\r\n          onChange={e => {\r\n            onFileChange(e);\r\n          }}\r\n          order={fieldOrder}\r\n          data-order={fieldOrder}\r\n          required\r\n          className=\"form-control\"\r\n        ></Input>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Assuming for now there will always be at least one page.\r\n  const renderPagination = maxPages => {\r\n    return (\r\n      <Pagination listClassName=\"justify-content-center\">\r\n        <PaginationItem disabled={visiblePage === 0}>\r\n          <PaginationLink previous onClick={e => prevPage(e)} href=\"#\" />\r\n        </PaginationItem>\r\n        {[...Array(maxPages)].map((page, i) => (\r\n          <PaginationItem active={i === visiblePage} key={i}>\r\n            <PaginationLink onClick={e => setPage(e, i)} href=\"#\">\r\n              {i + 1}\r\n            </PaginationLink>\r\n          </PaginationItem>\r\n        ))}\r\n        <PaginationItem disabled={visiblePage + 1 === maxPages}>\r\n          <PaginationLink next onClick={e => nextPage(e)} href=\"#\" />\r\n        </PaginationItem>\r\n      </Pagination>\r\n    );\r\n  };\r\n\r\n  const renderTest = model => {\r\n    try {\r\n      return (\r\n        <>\r\n          {/* {model.map((mod, i) => {\r\n            return ( */}\r\n          {Object.keys(model[visiblePage]).map((keyName, i) => (\r\n            <>\r\n              <h3>{keyName}</h3>\r\n              <p></p>\r\n              {/* <p> {JSON.stringify(mod[keyName])}</p> */}\r\n              <div>\r\n                {model[visiblePage][keyName]\r\n                  .sort((a, b) => a.order > b.order)\r\n                  .map(m => {\r\n                    let key = m.key;\r\n                    let type = m.type || \"text\";\r\n                    let props = m.props || {};\r\n                    let placeholder = m.placeholder || \"\";\r\n                    let fieldValue = m.value || \"\";\r\n                    let options = m.options || {};\r\n                    let questionRef = m.question_ref;\r\n\r\n                    setValidationRules(model[visiblePage][keyName]);\r\n                    setDependencyRules(model[visiblePage][keyName]);\r\n\r\n                    return (\r\n                      <FormGroup row key={`${key}label`}>\r\n                        <Col md=\"3\">\r\n                          <Label htmlFor={key}>\r\n                            {m.order} - {m.label}\r\n                          </Label>\r\n                        </Col>\r\n                        <Col xs=\"12\" md=\"9\">\r\n                          {(() => {\r\n                            switch (type) {\r\n                              case \"select\":\r\n                                return renderSelect(options, key, fieldValue);\r\n                              case \"radio\":\r\n                                return renderRadio(\r\n                                  options,\r\n                                  key,\r\n                                  questionRef,\r\n                                  fieldValue\r\n                                );\r\n                              case \"checkbox\":\r\n                                return renderCheckbox(options, key, fieldValue);\r\n                              case \"text\":\r\n                                return renderInput(type, key, fieldValue);\r\n                              case \"textarea\":\r\n                                return renderInput(type, key, fieldValue);\r\n                              case \"date\":\r\n                                return renderInput(type, key, fieldValue);\r\n                              case \"tel\":\r\n                                return renderInput(type, key, fieldValue);\r\n                              case \"file\":\r\n                                return renderFileInput(\r\n                                  type,\r\n                                  key,\r\n                                  fieldValue,\r\n                                  m.order\r\n                                );\r\n                              default:\r\n                                return \"renderStatic(fieldValue)\";\r\n                            }\r\n                          })()}\r\n                        </Col>\r\n                      </FormGroup>\r\n                    );\r\n                  })}\r\n              </div>\r\n            </>\r\n          ))}\r\n          {/* );\r\n           })} */}\r\n          {renderPagination(maxPages)}\r\n        </>\r\n      );\r\n    } catch (e) {\r\n      return <div>{e.message}</div>;\r\n    }\r\n  };\r\n\r\n  const renderForm = () => {\r\n    // console.log(\"Form model\");\r\n    // console.log(props.model);\r\n    let model = state.formModel;\r\n\r\n    if (props.pagination === true) {\r\n      let categories = [...new Set(model.map(m => m.category))]; // Distinct list of the question categories\r\n      var paginatedModel = categories.map(cat => {\r\n        var temp = {};\r\n        temp[cat] = model.filter(i => {\r\n          return i.category === cat;\r\n        });\r\n        return temp;\r\n      });\r\n\r\n      // console.log(\"y\");\r\n      // console.log(paginatedModel);\r\n      return renderTest(paginatedModel);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Col md=\"12\">\r\n      <Card>\r\n        <Form\r\n          className=\"needs-validation\"\r\n          noValidate\r\n          onSubmit={e => {\r\n            handleSubmit(e);\r\n          }}\r\n          method=\"post\"\r\n        >\r\n          {(() => {\r\n            if (props.title) {\r\n              return (\r\n                <CardHeader>\r\n                  <strong>{props.title}</strong>\r\n                </CardHeader>\r\n              );\r\n            } else {\r\n            }\r\n          })()}\r\n          <CardBody>\r\n            {state.doneBuildingModel === true && renderForm()}\r\n          </CardBody>\r\n          <CardFooter>\r\n            <div></div>\r\n            <LoaderButton\r\n              size=\"sm\"\r\n              color=\"primary\"\r\n              type=\"submit\"\r\n              isLoading={state.isLoading}\r\n              className=\"mx-1\"\r\n              //   onClick={e => {\r\n              //     handleSubmit(e);\r\n              //   }}\r\n            >\r\n              Save\r\n            </LoaderButton>\r\n\r\n            {(() => {\r\n              if (props.cancelButton) {\r\n                return (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    color=\"link\"\r\n                    type=\"reset\"\r\n                    className=\"mx-1\"\r\n                    onClick={props.cancelButton}\r\n                  >\r\n                    {props.cancelButtonText}\r\n                  </Button>\r\n                );\r\n              } else {\r\n              }\r\n            })()}\r\n\r\n            {/* {props.maxPages ? renderPagination(state.maxPages) : \"\"} */}\r\n          </CardFooter>\r\n        </Form>\r\n      </Card>\r\n    </Col>\r\n  );\r\n}\r\n"],"sourceRoot":""}