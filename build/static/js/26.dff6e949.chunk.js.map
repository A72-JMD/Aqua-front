{"version":3,"sources":["views/BackofficeArea/RequestImportExternal.js","components/LoaderButton/LoaderButton.js","../node_modules/reactstrap/es/Button.js","Common/helpers.js"],"names":["LoadTransactionFiles","props","apiError502","setApiError502","useState","externalimport","setExternalimport","Authheader","setHeader","useEffect","async","result","concat","Auth","currentSession","getIdToken","getJwtToken","getheader","apiName","path","myInit","headers","filetype","fileType","Authorization","API","get","console","log","e","message","alert","JSON","stringify","onLogout","getData","React","createElement","Array","isArray","Files","map","ExternalImport","file","class","onClick","Helpers","httpRequest","then","response","blob","url","window","URL","createObjectURL","Blob","link","document","href","setAttribute","body","appendChild","click","parentNode","removeChild","handleSubmit","File","aria-label","role","type","Bank","LoaderButton","_ref","isLoading","className","disabled","Button","Object","assign","Spinner","size","color","children","_excluded","propTypes","active","PropTypes","bool","string","block","outline","tag","tagPropType","innerRef","oneOfType","object","func","node","cssModule","close","_React$Component","_this","call","this","bind","_assertThisInitialized","_inheritsLoose","_proto","prototype","preventDefault","render","_this$props","ariaLabel","Tag","attributes","_objectWithoutPropertiesLoose","btnOutlineColor","classes","mapToCssModules","classNames","defaultAriaLabel","_extends","undefined","ref","Component","defaultProps","method","authorization","payload","config","toLowerCase","length","keys","fetch","ok","data","Promise","reject"],"mappings":"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","file":"static/js/26.dff6e949.chunk.js","sourcesContent":["import React, { useState, useEffect, Component } from \"react\";\r\nimport { Auth, API } from \"aws-amplify\";\r\nimport LoaderButton from \"../../components/LoaderButton/LoaderButton\";\r\nimport Helpers from \"../../Common/helpers.js\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardGroup,\r\n  CardFooter,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  Input,\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  InputGroupText,\r\n  Row,\r\n} from \"reactstrap\";\r\n\r\nfunction LoadTransactionFiles(props) {\r\n  const [apiError502, setApiError502] = useState(false);\r\n  const [externalimport, setExternalimport] = useState([]);\r\n  const [Authheader, setHeader] = useState();\r\n\r\n  const getheader = async () => {\r\n    var result = `Bearer ${(await Auth.currentSession()) //Call aws-aplyfy Auth method\r\n      .getIdToken()\r\n      .getJwtToken()}`;\r\n    setHeader(result); // set the auth header here;\r\n    return result;\r\n  };\r\n  async function handleSubmit(file) {\r\n    console.log(\"==========get argument==============\");\r\n    console.log(file);\r\n    console.log(\"========================\");\r\n    Helpers.httpRequest(\r\n      `https://ww8jinvodc.execute-api.ap-southeast-2.amazonaws.com/V1/fiji-web-files/Banks%2FLGT%2FLGTToExternalSys%2F` +\r\n        file,\r\n      \"get\",\r\n      Authheader\r\n    )\r\n      // 1. Convert the data into 'blob'\r\n      .then((response) => response.blob())\r\n      .then((blob) => {\r\n        // 2. Create blob link to download\r\n        const url = window.URL.createObjectURL(new Blob([blob]));\r\n        const link = document.createElement(\"a\");\r\n        link.href = url;\r\n        link.setAttribute(\"download\", file);\r\n        // 3. Append to html page\r\n        document.body.appendChild(link);\r\n        // 4. Force download\r\n        link.click();\r\n        // 5. Clean up and remove the link\r\n        link.parentNode.removeChild(link);\r\n\r\n        //.then((response) => {\r\n      });\r\n\r\n    // prevent form submit\r\n    //event.preventDefault();\r\n  }\r\n\r\n  useEffect(() => {\r\n    //Load Auth header\r\n    getheader();\r\n    // Pull out into a generic reusable function\r\n    const getData = async (fileType) => {\r\n      try {\r\n        let apiName = \"Fiji-Dev\";\r\n        let path = \"/listfiles\";\r\n        let myInit = {\r\n          headers: {\r\n            filetype: fileType,\r\n            Authorization: `Bearer ${(await Auth.currentSession())\r\n              .getIdToken()\r\n              .getJwtToken()}`,\r\n          },\r\n        };\r\n        var result = await API.get(apiName, path, myInit);\r\n        console.log(result);\r\n        setExternalimport(result); // set your files here;\r\n      } catch (e) {\r\n        if (e.message === \"Request failed with status code 502\") {\r\n          setApiError502(true);\r\n        } else {\r\n          alert(JSON.stringify(e));\r\n          props.onLogout();\r\n        }\r\n      }\r\n    };\r\n    // call getData\r\n    getData(\"ExternalImport\");\r\n  }, []);\r\n  return (\r\n    <div>\r\n      {Array.isArray(externalimport.Files) &&\r\n        externalimport.Files.map((filetype) => {\r\n          return (\r\n            <div>\r\n              {filetype.ExternalImport.map(function (file) {\r\n                return (\r\n                  <div>\r\n                    <div class=\"d-none d-sm-inline-block col-sm-6\">\r\n                      <button\r\n                        onClick={() => handleSubmit(file.File)}\r\n                        class=\"float-right btn btn-primary\"\r\n                      >\r\n                        <i class=\"icon-cloud-download\"></i>\r\n                      </button>\r\n                      <div\r\n                        aria-label=\"Toolbar with button groups\"\r\n                        role=\"toolbar\"\r\n                        class=\"float-right btn-toolbar\"\r\n                      >\r\n                        <div\r\n                          aria-label=\"First group\"\r\n                          role=\"group\"\r\n                          class=\"mr-3 btn-group\"\r\n                        >\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary active\"\r\n                          >\r\n                            {file.Bank}\r\n                          </button>\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary\"\r\n                          >\r\n                            {file.File}\r\n                          </button>\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary\"\r\n                          >\r\n                            Status\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n}\r\nexport default LoadTransactionFiles;\r\n","import React from \"react\";\r\nimport { Button, Spinner } from \"reactstrap\";\r\nimport \"./LoaderButton.css\";\r\n\r\nexport default function LoaderButton({\r\n  isLoading,\r\n  className = \"\",\r\n  disabled = false,\r\n  ...props\r\n}) {\r\n  return (\r\n    <Button\r\n      className={`LoaderButton ${className}`}\r\n      disabled={disabled || isLoading}\r\n      {...props}>\r\n      {isLoading && <Spinner size='sm' color='light' />}\r\n      {props.children}\r\n    </Button>\r\n  );\r\n}\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nvar _excluded = [\"active\", \"aria-label\", \"block\", \"className\", \"close\", \"cssModule\", \"color\", \"outline\", \"size\", \"tag\", \"innerRef\"];\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  active: PropTypes.bool,\n  'aria-label': PropTypes.string,\n  block: PropTypes.bool,\n  color: PropTypes.string,\n  disabled: PropTypes.bool,\n  outline: PropTypes.bool,\n  tag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.func, PropTypes.string]),\n  onClick: PropTypes.func,\n  size: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  close: PropTypes.bool\n};\nvar defaultProps = {\n  color: 'secondary',\n  tag: 'button'\n};\n\nvar Button = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Button, _React$Component);\n\n  function Button(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = Button.prototype;\n\n  _proto.onClick = function onClick(e) {\n    if (this.props.disabled) {\n      e.preventDefault();\n      return;\n    }\n\n    if (this.props.onClick) {\n      return this.props.onClick(e);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        active = _this$props.active,\n        ariaLabel = _this$props['aria-label'],\n        block = _this$props.block,\n        className = _this$props.className,\n        close = _this$props.close,\n        cssModule = _this$props.cssModule,\n        color = _this$props.color,\n        outline = _this$props.outline,\n        size = _this$props.size,\n        Tag = _this$props.tag,\n        innerRef = _this$props.innerRef,\n        attributes = _objectWithoutPropertiesLoose(_this$props, _excluded);\n\n    if (close && typeof attributes.children === 'undefined') {\n      attributes.children = /*#__PURE__*/React.createElement(\"span\", {\n        \"aria-hidden\": true\n      }, \"\\xD7\");\n    }\n\n    var btnOutlineColor = \"btn\" + (outline ? '-outline' : '') + \"-\" + color;\n    var classes = mapToCssModules(classNames(className, {\n      close: close\n    }, close || 'btn', close || btnOutlineColor, size ? \"btn-\" + size : false, block ? 'btn-block' : false, {\n      active: active,\n      disabled: this.props.disabled\n    }), cssModule);\n\n    if (attributes.href && Tag === 'button') {\n      Tag = 'a';\n    }\n\n    var defaultAriaLabel = close ? 'Close' : null;\n    return /*#__PURE__*/React.createElement(Tag, _extends({\n      type: Tag === 'button' && attributes.onClick ? 'button' : undefined\n    }, attributes, {\n      className: classes,\n      ref: innerRef,\n      onClick: this.onClick,\n      \"aria-label\": ariaLabel || defaultAriaLabel\n    }));\n  };\n\n  return Button;\n}(React.Component);\n\nButton.propTypes = propTypes;\nButton.defaultProps = defaultProps;\nexport default Button;","const Helpers = {\n  // Main wrapper for Fetch API\n  httpRequest: (url, method, authorization, payload, headers) => {\n    // Configuration to accept json as a default\n    const config = {\n      method,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization,\n      },\n    };\n    // method = post and payload, add it to the fetch request\n    if (method.toLowerCase() === \"post\" && payload && payload.length > 0) {\n      config.body = JSON.stringify(payload);\n    }\n    // if custom headers need to be set for the specific request\n    // override them here\n    if (\n      headers &&\n      typeof headers === \"object\" &&\n      Object.keys(headers).length > 0\n    ) {\n      config.headers = headers;\n    }\n    return fetch(url, config).then((response) => {\n      // Check if the request is 200\n      if (response.ok) {\n        let data = response;\n        console.log(\"check data\");\n        console.log(data);\n\n        // if the type is json return, interpret it as json\n        //  if (response.headers.get('Content-Type').indexOf('application/json') > -1) {\n\n        //  data = response.json();\n        //  }\n        return data;\n      }\n      // if an errors, anything but 200 then reject with the actuall response\n      return Promise.reject(response);\n    });\n  },\n};\nexport default Helpers;\n"],"sourceRoot":""}