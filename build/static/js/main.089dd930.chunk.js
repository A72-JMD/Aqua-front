(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[5],{162:function(e,t){},327:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(4),o=n.n(a),r=n(19);function c(e){let{component:t,appProps:n,...a}=e;return o.a.createElement(r.d,Object.assign({},a,{render:e=>!0===n.isAuthenticated?o.a.createElement(t,Object.assign({},e,n)):o.a.createElement(r.c,{to:"/login?redirect=".concat(e.location.pathname).concat(e.location.search)})}))}},346:function(e,t,n){e.exports=n(904)},488:function(e,t,n){},545:function(e,t){},55:function(e,t,n){"use strict";t.a={apiGateway:{NAME:"Fiji-Dev",REGION:"ap-southeast-2",URL:"https://ww8jinvodc.execute-api.ap-southeast-2.amazonaws.com/V1"},cognito:{REGION:"ap-southeast-2",USER_POOL_ID:"ap-southeast-2_nisg14d0z",AUTH_URL:"https://fiji-dev.auth.ap-southeast-2.amazoncognito.com/login/",REDIRECT_URL:"http://localhost:4200/auth/oauth2/callback/",APP_CLIENT_ID:"2100olpm7712gij41jdsog9ps9"}}},899:function(e,t,n){},904:function(e,t,n){"use strict";n.r(t);n(347),n(379),n(235),n(236),n(237),n(240),n(241),n(245),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(414),n(422),n(423),n(424),n(432),n(180),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(445),n(446),n(447),n(448),n(453),n(457),n(459),n(460),n(461),n(462),n(463),n(465),n(466),n(467),n(468),n(469),n(208),n(209),n(210),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(470),n(471),n(472),n(474),n(231),n(232),n(233),n(476),n(478),n(479),n(480),n(481),n(482),n(483),n(121),n(268),n(271),n(274),n(275);!function(){if("function"===typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var a=n(4),o=n.n(a),r=n(177),c=n.n(r),i=(n(488),n(85)),s=n(19),l=n(63);n(899);function u(e){let{component:t,appProps:n,...a}=e;const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[]]/g,"\\$&");const n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}("redirect");return o.a.createElement(s.d,Object.assign({},a,{render:e=>n.isAuthenticated?o.a.createElement(s.c,{to:""===r||null===r?"/":r}):o.a.createElement(t,Object.assign({},e,n))}))}var p=n(327),m=n(55);function d(){return{userGroups:[],userInfo:{},isAuthed:!1}}async function g(){try{var e=new d,t=await l.b.currentSession();e.isAuthed=!0,e.userGroups=t.getAccessToken().payload["cognito:groups"];var n=t.getIdToken(),a=await l.b.currentAuthenticatedUser(),o=JSON.parse(a.pool.storage["CognitoIdentityServiceProvider.".concat(m.a.cognito.APP_CLIENT_ID,".").concat(a.username,".userData")]),r={};o.UserAttributes.map((e,t)=>r[o.UserAttributes[t].Name]=o.UserAttributes[t].Value);var c={id:n.payload["cognito:username"],email:n.payload.email,emailVerified:n.payload.email_verified,phone:n.payload.phone_number,phoneVerified:n.payload.phone_number_verified,userAttributes:r};return e.userInfo=c,e}catch(i){return"No current user"!==i&&alert(i),new d}}var h=Object(s.o)((function(e){const[t,r]=Object(a.useState)(g()),[c,m]=Object(a.useState)(!1);Object(a.useEffect)(()=>{!async function(){try{await l.b.currentSession(),await l.b.currentAuthenticatedUser();r(await g()),d(!0)}catch(e){"No current user"!==e&&alert(e)}}()},[]);const d=async e=>{m(e),r(await g())},h=o.a.lazy(()=>Promise.all([n.e(9),n.e(33)]).then(n.bind(null,1412))),E=o.a.lazy(()=>Promise.all([n.e(11),n.e(32)]).then(n.bind(null,1385))),b=o.a.lazy(()=>Promise.all([n.e(0),n.e(3),n.e(21)]).then(n.bind(null,1387))),f=o.a.lazy(()=>Promise.all([n.e(0),n.e(3),n.e(8),n.e(10)]).then(n.bind(null,1389))),w=o.a.lazy(()=>n.e(13).then(n.bind(null,1263))),P=o.a.lazy(()=>n.e(14).then(n.bind(null,1390))),y={isAuthenticated:c,updateAuthStatus:d,onLogout:async()=>{console.log("Signing out."),await l.b.signOut().then(e=>console.log(e)).catch(e=>console.log(e)),d(!1),console.log("signed out.")},userDetails:t};return o.a.createElement(i.BrowserRouter,null,o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("div",{className:"animated fadeIn pt-3 text-center"},"Loading...")},o.a.createElement(s.g,null,o.a.createElement(u,{exact:!0,path:"/login",name:"Login Page",component:E,appProps:y,props:e}),o.a.createElement(u,{exact:!0,path:"/register",name:"Register Page",component:b,appProps:y,props:e}),o.a.createElement(u,{exact:!0,path:"/registervendor",name:"Register Vendor Page",component:f,appProps:y,props:e}),o.a.createElement(u,{exact:!0,path:"/404",name:"Page 404",component:w,appProps:y,props:e}),o.a.createElement(u,{exact:!0,path:"/500",name:"Page 500",component:P,appProps:y,props:e}),o.a.createElement(p.a,Object.assign({path:"/",name:"Home",component:h,appProps:y},e)),o.a.createElement(u,{component:w,appProps:y,props:e}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.c.configure({Auth:{mandatorySignIn:!0,region:m.a.cognito.REGION,userPoolId:m.a.cognito.USER_POOL_ID,identityPoolId:m.a.cognito.IDENTITY_POOL_ID,userPoolWebClientId:m.a.cognito.APP_CLIENT_ID,cognitoAuthUrl:m.a.cognito.AUTH_URL,cognitoRedirectUrl:m.a.cognito.REDIRECT_URL},API:{endpoints:[{name:"Fiji-Dev",endpoint:m.a.apiGateway.URL,region:m.a.apiGateway.REGION,authenticationType:"AMAZON_COGNITO_USER_POOLS",custom_header:async()=>({"Access-Control-Allow-Origin":"*"})}]}}),c.a.render(o.a.createElement(i.BrowserRouter,null,o.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[346,6,7]]]);
//# sourceMappingURL=main.089dd930.chunk.js.map