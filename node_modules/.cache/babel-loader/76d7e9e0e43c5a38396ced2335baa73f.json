{"ast":null,"code":"var _jsxFileName = \"/Users/JMD/Developments/Projects/Aqua/Aqua-front/src/views/ComplianceArea/ComplianceSharedFilesZurich.js\";\nimport React, { useState, useEffect, Component } from \"react\";\nimport { Auth, API } from \"aws-amplify\";\nimport LoaderButton from \"../../components/LoaderButton/LoaderButton\";\nimport Helpers from \"../../Common/helpers.js\";\nimport { Button, Card, CardBody, CardGroup, CardFooter, Col, Container, Form, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from \"reactstrap\";\nfunction LoadTransactionFiles(props) {\n  const [apiError502, setApiError502] = useState(false);\n  const [positions, setPositions] = useState([]);\n  const [Authheader, setHeader] = useState();\n  const getheader = async () => {\n    var result = \"Bearer \".concat((await Auth.currentSession() //Call aws-aplyfy Auth method\n    ).getIdToken().getJwtToken());\n    setHeader(result); // set the auth header here;\n    return result;\n  };\n  async function handleSubmit(file) {\n    Helpers.httpRequest(\"https://ww8jinvodc.execute-api.ap-southeast-2.amazonaws.com/V1/fiji-web-files/Compliance%2FShared_Files%2FZurich%2F\" + file, \"get\", Authheader)\n    // 1. Convert the data into 'blob'\n    .then(response => response.blob()).then(blob => {\n      // 2. Create blob link to download\n      const url = window.URL.createObjectURL(new Blob([blob]));\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.setAttribute(\"download\", file);\n      // 3. Append to html page\n      document.body.appendChild(link);\n      // 4. Force download\n      link.click();\n      // 5. Clean up and remove the link\n      link.parentNode.removeChild(link);\n\n      //.then((response) => {\n    });\n\n    // prevent form submit\n    //event.preventDefault();\n  }\n  useEffect(() => {\n    //Load Auth header\n    getheader();\n    // Pull out into a generic reusable function\n    var HeaderAuth = \"test\";\n    const getData = async thirdparty => {\n      try {\n        let apiName = \"Fiji-Dev\";\n        let path = \"/compliancefiles\";\n        let myInit = {\n          headers: {\n            thirdparty: thirdparty,\n            Authorization: \"Bearer \".concat((await Auth.currentSession()).getIdToken().getJwtToken())\n          }\n        };\n        console.log(\"==========INIT with token==============\");\n        Array.isArray(myInit.headers);\n        HeaderAuth = myInit.headers.Authorization;\n        console.log(\"========================\");\n        var result = await API.get(apiName, path, myInit);\n        console.log(result);\n        setPositions(result); // set your files here;\n      } catch (e) {\n        if (e.message === \"Request failed with status code 502\") {\n          setApiError502(true);\n        } else {\n          alert(JSON.stringify(e));\n          props.onLogout();\n        }\n      }\n    };\n    // call getData\n    getData(\"Zurich\");\n    console.log(HeaderAuth);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, Array.isArray(positions.Files) && positions.Files.map(filetype => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, filetype.Zurich.map(function (file) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"d-none d-sm-inline-block col-sm-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => handleSubmit(file.File),\n        class: \"float-right btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"icon-cloud-download\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        \"aria-label\": \"Toolbar with button groups\",\n        role: \"toolbar\",\n        class: \"float-right btn-toolbar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"aria-label\": \"First group\",\n        role: \"group\",\n        class: \"mr-3 btn-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-outline-secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 27\n        }\n      }, file.Object), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-outline-secondary active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 27\n        }\n      }, file.File), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-outline-secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 27\n        }\n      }, \"Status\")))));\n    }));\n  }));\n}\nexport default LoadTransactionFiles;","map":{"version":3,"names":["React","useState","useEffect","Component","Auth","API","LoaderButton","Helpers","Button","Card","CardBody","CardGroup","CardFooter","Col","Container","Form","Input","InputGroup","InputGroupAddon","InputGroupText","Row","LoadTransactionFiles","props","apiError502","setApiError502","positions","setPositions","Authheader","setHeader","getheader","result","concat","currentSession","getIdToken","getJwtToken","handleSubmit","file","httpRequest","then","response","blob","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","HeaderAuth","getData","thirdparty","apiName","path","myInit","headers","Authorization","console","log","Array","isArray","get","e","message","alert","JSON","stringify","onLogout","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Files","map","filetype","Zurich","class","onClick","File","role","type","Object"],"sources":["/Users/JMD/Developments/Projects/Aqua/Aqua-front/src/views/ComplianceArea/ComplianceSharedFilesZurich.js"],"sourcesContent":["import React, { useState, useEffect, Component } from \"react\";\r\nimport { Auth, API } from \"aws-amplify\";\r\nimport LoaderButton from \"../../components/LoaderButton/LoaderButton\";\r\nimport Helpers from \"../../Common/helpers.js\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardGroup,\r\n  CardFooter,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  Input,\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  InputGroupText,\r\n  Row,\r\n} from \"reactstrap\";\r\n\r\nfunction LoadTransactionFiles(props) {\r\n  const [apiError502, setApiError502] = useState(false);\r\n  const [positions, setPositions] = useState([]);\r\n  const [Authheader, setHeader] = useState();\r\n\r\n  const getheader = async () => {\r\n    var result = `Bearer ${(await Auth.currentSession()) //Call aws-aplyfy Auth method\r\n      .getIdToken()\r\n      .getJwtToken()}`;\r\n    setHeader(result); // set the auth header here;\r\n    return result;\r\n  };\r\n  async function handleSubmit(file) {\r\n    Helpers.httpRequest(\r\n      `https://ww8jinvodc.execute-api.ap-southeast-2.amazonaws.com/V1/fiji-web-files/Compliance%2FShared_Files%2FZurich%2F` +\r\n        file,\r\n      \"get\",\r\n      Authheader\r\n    )\r\n      // 1. Convert the data into 'blob'\r\n      .then((response) => response.blob())\r\n      .then((blob) => {\r\n        // 2. Create blob link to download\r\n        const url = window.URL.createObjectURL(new Blob([blob]));\r\n        const link = document.createElement(\"a\");\r\n        link.href = url;\r\n        link.setAttribute(\"download\", file);\r\n        // 3. Append to html page\r\n        document.body.appendChild(link);\r\n        // 4. Force download\r\n        link.click();\r\n        // 5. Clean up and remove the link\r\n        link.parentNode.removeChild(link);\r\n\r\n        //.then((response) => {\r\n      });\r\n\r\n    // prevent form submit\r\n    //event.preventDefault();\r\n  }\r\n\r\n  useEffect(() => {\r\n    //Load Auth header\r\n    getheader();\r\n    // Pull out into a generic reusable function\r\n    var HeaderAuth = \"test\";\r\n    const getData = async (thirdparty) => {\r\n      try {\r\n        let apiName = \"Fiji-Dev\";\r\n        let path = \"/compliancefiles\";\r\n        let myInit = {\r\n          headers: {\r\n            thirdparty: thirdparty,\r\n            Authorization: `Bearer ${(await Auth.currentSession())\r\n              .getIdToken()\r\n              .getJwtToken()}`,\r\n          },\r\n        };\r\n        console.log(\"==========INIT with token==============\");\r\n        Array.isArray(myInit.headers);\r\n        HeaderAuth = myInit.headers.Authorization;\r\n        console.log(\"========================\");\r\n\r\n        var result = await API.get(apiName, path, myInit);\r\n        console.log(result);\r\n        setPositions(result); // set your files here;\r\n      } catch (e) {\r\n        if (e.message === \"Request failed with status code 502\") {\r\n          setApiError502(true);\r\n        } else {\r\n          alert(JSON.stringify(e));\r\n          props.onLogout();\r\n        }\r\n      }\r\n    };\r\n    // call getData\r\n    getData(\"Zurich\");\r\n    console.log(HeaderAuth);\r\n  }, []);\r\n  return (\r\n    <div>\r\n      {Array.isArray(positions.Files) &&\r\n        positions.Files.map((filetype) => {\r\n          return (\r\n            <div>\r\n              {filetype.Zurich.map(function (file) {\r\n                return (\r\n                  <div>\r\n                    <div class=\"d-none d-sm-inline-block col-sm-6\">\r\n                      <button\r\n                        onClick={() => handleSubmit(file.File)}\r\n                        class=\"float-right btn btn-primary\"\r\n                      >\r\n                        <i class=\"icon-cloud-download\"></i>\r\n                      </button>\r\n                      <div\r\n                        aria-label=\"Toolbar with button groups\"\r\n                        role=\"toolbar\"\r\n                        class=\"float-right btn-toolbar\"\r\n                      >\r\n                        <div\r\n                          aria-label=\"First group\"\r\n                          role=\"group\"\r\n                          class=\"mr-3 btn-group\"\r\n                        >\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary\"\r\n                          >\r\n                            {file.Object}\r\n                          </button>\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary active\"\r\n                          >\r\n                            {file.File}\r\n                          </button>\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary\"\r\n                          >\r\n                            Status\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n}\r\nexport default LoadTransactionFiles;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}