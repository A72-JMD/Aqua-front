{"ast":null,"code":"var _jsxFileName = \"/Users/JMD/Developments/Projects/Fiji-Web/src/views/PortfolioArea/RequestPortfolioMORA.js\";\nimport React, { useState, useEffect, Component } from \"react\";\nimport { Auth, API } from \"aws-amplify\";\nimport LoaderButton from \"../../components/LoaderButton/LoaderButton\";\nimport Helpers from \"../../Common/helpers.js\";\nimport { Button, Card, CardBody, CardGroup, CardFooter, Col, Container, Form, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from \"reactstrap\";\nfunction LoadTransactionFiles(props) {\n  const [apiError502, setApiError502] = useState(false);\n  const [transactions, setTransactions] = useState([]);\n  const [Authheader, setHeader] = useState();\n  const getheader = async () => {\n    var result = \"Bearer \".concat((await Auth.currentSession() //Call aws-aplyfy Auth method\n    ).getIdToken().getJwtToken());\n    setHeader(result); // set the auth header here;\n    return result;\n  };\n  async function handleSubmit(file) {\n    console.log(\"==========get argument==============\");\n    console.log(file);\n    console.log(\"========================\");\n    Helpers.httpRequest(\"https://ww8jinvodc.execute-api.ap-southeast-2.amazonaws.com/V1/fiji-web-files/Banks%2FLGT%2FTransactions%2F\" + file, \"get\", Authheader)\n    // 1. Convert the data into 'blob'\n    .then(response => response.blob()).then(blob => {\n      // 2. Create blob link to download\n      const url = window.URL.createObjectURL(new Blob([blob]));\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.setAttribute(\"download\", file);\n      // 3. Append to html page\n      document.body.appendChild(link);\n      // 4. Force download\n      link.click();\n      // 5. Clean up and remove the link\n      link.parentNode.removeChild(link);\n\n      //.then((response) => {\n    });\n\n    // prevent form submit\n    //event.preventDefault();\n  }\n  useEffect(() => {\n    //Load Auth header\n    getheader();\n    // Pull out into a generic reusable function\n    const getData = async fileType => {\n      try {\n        let apiName = \"Fiji-Dev\";\n        let path = \"/listfiles\";\n        let myInit = {\n          headers: {\n            filetype: fileType,\n            Authorization: \"Bearer \".concat((await Auth.currentSession()).getIdToken().getJwtToken())\n          }\n        };\n        var result = await API.get(apiName, path, myInit);\n        console.log(result);\n        setTransactions(result); // set your files here;\n      } catch (e) {\n        if (e.message === \"Request failed with status code 502\") {\n          setApiError502(true);\n        } else {\n          alert(JSON.stringify(e));\n          props.onLogout();\n        }\n      }\n    };\n    // call getData\n    getData(\"Transactions\");\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, Array.isArray(transactions.Files) && transactions.Files.map(filetype => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, filetype.Transactions.map(function (file) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"d-none d-sm-inline-block col-sm-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => handleSubmit(file.File),\n        class: \"float-right btn btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"icon-cloud-download\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        \"aria-label\": \"Toolbar with button groups\",\n        role: \"toolbar\",\n        class: \"float-right btn-toolbar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        \"aria-label\": \"First group\",\n        role: \"group\",\n        class: \"mr-3 btn-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-outline-secondary active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 27\n        }\n      }, file.Bank), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-outline-secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 27\n        }\n      }, file.File), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-outline-secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 27\n        }\n      }, \"Status\")))));\n    }));\n  }));\n}\nexport default LoadTransactionFiles;","map":{"version":3,"names":["React","useState","useEffect","Component","Auth","API","LoaderButton","Helpers","Button","Card","CardBody","CardGroup","CardFooter","Col","Container","Form","Input","InputGroup","InputGroupAddon","InputGroupText","Row","LoadTransactionFiles","props","apiError502","setApiError502","transactions","setTransactions","Authheader","setHeader","getheader","result","concat","currentSession","getIdToken","getJwtToken","handleSubmit","file","console","log","httpRequest","then","response","blob","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","getData","fileType","apiName","path","myInit","headers","filetype","Authorization","get","e","message","alert","JSON","stringify","onLogout","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Array","isArray","Files","map","Transactions","class","onClick","File","role","type","Bank"],"sources":["/Users/JMD/Developments/Projects/Fiji-Web/src/views/PortfolioArea/RequestPortfolioMORA.js"],"sourcesContent":["import React, { useState, useEffect, Component } from \"react\";\r\nimport { Auth, API } from \"aws-amplify\";\r\nimport LoaderButton from \"../../components/LoaderButton/LoaderButton\";\r\nimport Helpers from \"../../Common/helpers.js\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardGroup,\r\n  CardFooter,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  Input,\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  InputGroupText,\r\n  Row,\r\n} from \"reactstrap\";\r\n\r\nfunction LoadTransactionFiles(props) {\r\n  const [apiError502, setApiError502] = useState(false);\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [Authheader, setHeader] = useState();\r\n\r\n  const getheader = async () => {\r\n    var result = `Bearer ${(await Auth.currentSession()) //Call aws-aplyfy Auth method\r\n      .getIdToken()\r\n      .getJwtToken()}`;\r\n    setHeader(result); // set the auth header here;\r\n    return result;\r\n  };\r\n  async function handleSubmit(file) {\r\n    console.log(\"==========get argument==============\");\r\n    console.log(file);\r\n    console.log(\"========================\");\r\n    Helpers.httpRequest(\r\n      `https://ww8jinvodc.execute-api.ap-southeast-2.amazonaws.com/V1/fiji-web-files/Banks%2FLGT%2FTransactions%2F` +\r\n        file,\r\n      \"get\",\r\n      Authheader\r\n    )\r\n      // 1. Convert the data into 'blob'\r\n      .then((response) => response.blob())\r\n      .then((blob) => {\r\n        // 2. Create blob link to download\r\n        const url = window.URL.createObjectURL(new Blob([blob]));\r\n        const link = document.createElement(\"a\");\r\n        link.href = url;\r\n        link.setAttribute(\"download\", file);\r\n        // 3. Append to html page\r\n        document.body.appendChild(link);\r\n        // 4. Force download\r\n        link.click();\r\n        // 5. Clean up and remove the link\r\n        link.parentNode.removeChild(link);\r\n\r\n        //.then((response) => {\r\n      });\r\n\r\n    // prevent form submit\r\n    //event.preventDefault();\r\n  }\r\n\r\n  useEffect(() => {\r\n    //Load Auth header\r\n    getheader();\r\n    // Pull out into a generic reusable function\r\n    const getData = async (fileType) => {\r\n      try {\r\n        let apiName = \"Fiji-Dev\";\r\n        let path = \"/listfiles\";\r\n        let myInit = {\r\n          headers: {\r\n            filetype: fileType,\r\n            Authorization: `Bearer ${(await Auth.currentSession())\r\n              .getIdToken()\r\n              .getJwtToken()}`,\r\n          },\r\n        };\r\n        var result = await API.get(apiName, path, myInit);\r\n        console.log(result);\r\n        setTransactions(result); // set your files here;\r\n      } catch (e) {\r\n        if (e.message === \"Request failed with status code 502\") {\r\n          setApiError502(true);\r\n        } else {\r\n          alert(JSON.stringify(e));\r\n          props.onLogout();\r\n        }\r\n      }\r\n    };\r\n    // call getData\r\n    getData(\"Transactions\");\r\n  }, []);\r\n  return (\r\n    <div>\r\n      {Array.isArray(transactions.Files) &&\r\n        transactions.Files.map((filetype) => {\r\n          return (\r\n            <div>\r\n              {filetype.Transactions.map(function (file) {\r\n                return (\r\n                  <div>\r\n                    <div class=\"d-none d-sm-inline-block col-sm-6\">\r\n                      <button\r\n                        onClick={() => handleSubmit(file.File)}\r\n                        class=\"float-right btn btn-primary\"\r\n                      >\r\n                        <i class=\"icon-cloud-download\"></i>\r\n                      </button>\r\n                      <div\r\n                        aria-label=\"Toolbar with button groups\"\r\n                        role=\"toolbar\"\r\n                        class=\"float-right btn-toolbar\"\r\n                      >\r\n                        <div\r\n                          aria-label=\"First group\"\r\n                          role=\"group\"\r\n                          class=\"mr-3 btn-group\"\r\n                        >\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary active\"\r\n                          >\r\n                            {file.Bank}\r\n                          </button>\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary\"\r\n                          >\r\n                            {file.File}\r\n                          </button>\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"btn btn-outline-secondary\"\r\n                          >\r\n                            Status\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n}\r\nexport default LoadTransactionFiles;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,SAAS,QAAQ,OAAO;AAC7D,SAASC,IAAI,EAAEC,GAAG,QAAQ,aAAa;AACvC,OAAOC,YAAY,MAAM,4CAA4C;AACrE,OAAOC,OAAO,MAAM,yBAAyB;AAC7C,SACEC,MAAM,EACNC,IAAI,EACJC,QAAQ,EACRC,SAAS,EACTC,UAAU,EACVC,GAAG,EACHC,SAAS,EACTC,IAAI,EACJC,KAAK,EACLC,UAAU,EACVC,eAAe,EACfC,cAAc,EACdC,GAAG,QACE,YAAY;AAEnB,SAASC,oBAAoBA,CAACC,KAAK,EAAE;EACnC,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACwB,YAAY,EAAEC,eAAe,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAAC0B,UAAU,EAAEC,SAAS,CAAC,GAAG3B,QAAQ,CAAC,CAAC;EAE1C,MAAM4B,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAIC,MAAM,aAAAC,MAAA,CAAa,CAAC,MAAM3B,IAAI,CAAC4B,cAAc,CAAC,CAAC,CAAE;IAAA,EAClDC,UAAU,CAAC,CAAC,CACZC,WAAW,CAAC,CAAC,CAAE;IAClBN,SAAS,CAACE,MAAM,CAAC,CAAC,CAAC;IACnB,OAAOA,MAAM;EACf,CAAC;EACD,eAAeK,YAAYA,CAACC,IAAI,EAAE;IAChCC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;IACnDD,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IACjBC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACvC/B,OAAO,CAACgC,WAAW,CACjB,gHACEH,IAAI,EACN,KAAK,EACLT,UACF;IACE;IAAA,CACCa,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEE,IAAI,IAAK;MACd;MACA,MAAMC,GAAG,GAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAAC,IAAIC,IAAI,CAAC,CAACL,IAAI,CAAC,CAAC,CAAC;MACxD,MAAMM,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;MACxCF,IAAI,CAACG,IAAI,GAAGR,GAAG;MACfK,IAAI,CAACI,YAAY,CAAC,UAAU,EAAEhB,IAAI,CAAC;MACnC;MACAa,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC;MAC/B;MACAA,IAAI,CAACO,KAAK,CAAC,CAAC;MACZ;MACAP,IAAI,CAACQ,UAAU,CAACC,WAAW,CAACT,IAAI,CAAC;;MAEjC;IACF,CAAC,CAAC;;IAEJ;IACA;EACF;EAEA9C,SAAS,CAAC,MAAM;IACd;IACA2B,SAAS,CAAC,CAAC;IACX;IACA,MAAM6B,OAAO,GAAG,MAAOC,QAAQ,IAAK;MAClC,IAAI;QACF,IAAIC,OAAO,GAAG,UAAU;QACxB,IAAIC,IAAI,GAAG,YAAY;QACvB,IAAIC,MAAM,GAAG;UACXC,OAAO,EAAE;YACPC,QAAQ,EAAEL,QAAQ;YAClBM,aAAa,YAAAlC,MAAA,CAAY,CAAC,MAAM3B,IAAI,CAAC4B,cAAc,CAAC,CAAC,EAClDC,UAAU,CAAC,CAAC,CACZC,WAAW,CAAC,CAAC;UAClB;QACF,CAAC;QACD,IAAIJ,MAAM,GAAG,MAAMzB,GAAG,CAAC6D,GAAG,CAACN,OAAO,EAAEC,IAAI,EAAEC,MAAM,CAAC;QACjDzB,OAAO,CAACC,GAAG,CAACR,MAAM,CAAC;QACnBJ,eAAe,CAACI,MAAM,CAAC,CAAC,CAAC;MAC3B,CAAC,CAAC,OAAOqC,CAAC,EAAE;QACV,IAAIA,CAAC,CAACC,OAAO,KAAK,qCAAqC,EAAE;UACvD5C,cAAc,CAAC,IAAI,CAAC;QACtB,CAAC,MAAM;UACL6C,KAAK,CAACC,IAAI,CAACC,SAAS,CAACJ,CAAC,CAAC,CAAC;UACxB7C,KAAK,CAACkD,QAAQ,CAAC,CAAC;QAClB;MACF;IACF,CAAC;IACD;IACAd,OAAO,CAAC,cAAc,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;EACN,oBACE1D,KAAA,CAAAkD,aAAA;IAAAuB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACGC,KAAK,CAACC,OAAO,CAACvD,YAAY,CAACwD,KAAK,CAAC,IAChCxD,YAAY,CAACwD,KAAK,CAACC,GAAG,CAAElB,QAAQ,IAAK;IACnC,oBACEhE,KAAA,CAAAkD,aAAA;MAAAuB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACGd,QAAQ,CAACmB,YAAY,CAACD,GAAG,CAAC,UAAU9C,IAAI,EAAE;MACzC,oBACEpC,KAAA,CAAAkD,aAAA;QAAAuB,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,gBACE9E,KAAA,CAAAkD,aAAA;QAAKkC,KAAK,EAAC,mCAAmC;QAAAX,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,gBAC5C9E,KAAA,CAAAkD,aAAA;QACEmC,OAAO,EAAEA,CAAA,KAAMlD,YAAY,CAACC,IAAI,CAACkD,IAAI,CAAE;QACvCF,KAAK,EAAC,6BAA6B;QAAAX,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,gBAEnC9E,KAAA,CAAAkD,aAAA;QAAGkC,KAAK,EAAC,qBAAqB;QAAAX,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,CAAI,CAC5B,CAAC,eACT9E,KAAA,CAAAkD,aAAA;QACE,cAAW,4BAA4B;QACvCqC,IAAI,EAAC,SAAS;QACdH,KAAK,EAAC,yBAAyB;QAAAX,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,gBAE/B9E,KAAA,CAAAkD,aAAA;QACE,cAAW,aAAa;QACxBqC,IAAI,EAAC,OAAO;QACZH,KAAK,EAAC,gBAAgB;QAAAX,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,gBAEtB9E,KAAA,CAAAkD,aAAA;QACEsC,IAAI,EAAC,QAAQ;QACbJ,KAAK,EAAC,kCAAkC;QAAAX,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,GAEvC1C,IAAI,CAACqD,IACA,CAAC,eACTzF,KAAA,CAAAkD,aAAA;QACEsC,IAAI,EAAC,QAAQ;QACbJ,KAAK,EAAC,2BAA2B;QAAAX,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,GAEhC1C,IAAI,CAACkD,IACA,CAAC,eACTtF,KAAA,CAAAkD,aAAA;QACEsC,IAAI,EAAC,QAAQ;QACbJ,KAAK,EAAC,2BAA2B;QAAAX,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,GAClC,QAEO,CACL,CACF,CACF,CACF,CAAC;IAEV,CAAC,CACE,CAAC;EAEV,CAAC,CACA,CAAC;AAEV;AACA,eAAezD,oBAAoB"},"metadata":{},"sourceType":"module"}