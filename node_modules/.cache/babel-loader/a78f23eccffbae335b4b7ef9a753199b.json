{"ast":null,"code":"var _jsxFileName = \"/Users/JMD/Developments/Projects/Aqua/Aqua-front/src/views/Vendor/VendorDashboardContent.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Auth, API } from \"aws-amplify\";\nimport { Button, CardBody, Row } from \"reactstrap\";\nimport LoadingBlock from \"../../components/loadingBlock/loadingBlock\";\nfunction VendorDashboardContent(props) {\n  const [vendorAssessments, setVendorAssessments] = useState([]);\n  const [pageReady, setPageReady] = useState(false);\n  const statusMap = {\n    in_progress: \"In progress\",\n    not_started: \"Not started\"\n  };\n  useEffect(() => {\n    onLoad();\n  }, []); //eslint-disable-line\n\n  const onLoad = async () => {\n    setPageReady(false);\n    await getData().then(data => {\n      // console.log(\"data.body\");\n      // console.log(data.body);\n      setVendorAssessments(data.body);\n      setPageReady(true);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  // Pull out into a generic reusable function\n  const getData = async () => {\n    try {\n      let apiName = \"Fiji-Dev\";\n      let path = \"/assessments/list\";\n      let myInit = {\n        headers: {\n          Authorization: \"Bearer \".concat((await Auth.currentSession()).getIdToken().getJwtToken())\n        }\n      };\n      var result = await API.get(apiName, path, myInit);\n    } catch (e) {\n      if (e.message === \"Request failed with status code 502\") {\n        //toggleApiError502(true);\n      } else {\n        console.log(e);\n        //props.onLogout();\n      }\n    }\n    return result;\n  };\n  const handleClick = e => {\n    console.log(e.target.name);\n    props.setCurrentAssessment(e.target.id);\n    props.setCurrentAssessmentCustomer(e.target.name);\n    props.setViewForm(e.target.name);\n  };\n  return /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, pageReady ? vendorAssessments.map((i, c) => /*#__PURE__*/React.createElement(Row, {\n    key: c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"sm\",\n    color: \"link\",\n    type: \"reset\",\n    onClick: handleClick,\n    id: i.assessment_id,\n    name: i.customer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, \"\".concat(i.customer, \" - \").concat(statusMap[i.status]))))) : /*#__PURE__*/React.createElement(LoadingBlock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }));\n}\nexport default VendorDashboardContent;","map":{"version":3,"names":["React","useState","useEffect","Auth","API","Button","CardBody","Row","LoadingBlock","VendorDashboardContent","props","vendorAssessments","setVendorAssessments","pageReady","setPageReady","statusMap","in_progress","not_started","onLoad","getData","then","data","body","catch","error","console","apiName","path","myInit","headers","Authorization","concat","currentSession","getIdToken","getJwtToken","result","get","e","message","log","handleClick","target","name","setCurrentAssessment","id","setCurrentAssessmentCustomer","setViewForm","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","i","c","key","size","color","type","onClick","assessment_id","customer","status"],"sources":["/Users/JMD/Developments/Projects/Aqua/Aqua-front/src/views/Vendor/VendorDashboardContent.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Auth, API } from \"aws-amplify\";\r\nimport { Button, CardBody, Row } from \"reactstrap\";\r\nimport LoadingBlock from \"../../components/loadingBlock/loadingBlock\";\r\n\r\nfunction VendorDashboardContent(props) {\r\n  const [vendorAssessments, setVendorAssessments] = useState([]);\r\n  const [pageReady, setPageReady] = useState(false);\r\n\r\n  const statusMap = {\r\n    in_progress: \"In progress\",\r\n    not_started: \"Not started\"\r\n  };\r\n\r\n  useEffect(() => {\r\n    onLoad();\r\n  }, []); //eslint-disable-line\r\n\r\n  const onLoad = async () => {\r\n    setPageReady(false);\r\n    await getData()\r\n      .then(data => {\r\n        // console.log(\"data.body\");\r\n        // console.log(data.body);\r\n        setVendorAssessments(data.body);\r\n        setPageReady(true);\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n  };\r\n\r\n  // Pull out into a generic reusable function\r\n  const getData = async () => {\r\n    try {\r\n      let apiName = \"Fiji-Dev\";\r\n      let path = \"/assessments/list\";\r\n      let myInit = {\r\n        headers: {\r\n          Authorization: `Bearer ${(await Auth.currentSession())\r\n            .getIdToken()\r\n            .getJwtToken()}`\r\n        }\r\n      };\r\n      var result = await API.get(apiName, path, myInit);\r\n    } catch (e) {\r\n      if (e.message === \"Request failed with status code 502\") {\r\n        //toggleApiError502(true);\r\n      } else {\r\n        console.log(e);\r\n        //props.onLogout();\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  const handleClick = e => {\r\n    console.log(e.target.name);\r\n    props.setCurrentAssessment(e.target.id);\r\n    props.setCurrentAssessmentCustomer(e.target.name);\r\n    props.setViewForm(e.target.name);\r\n  };\r\n\r\n  return (\r\n    <CardBody>\r\n      {pageReady ? (\r\n        vendorAssessments.map((i, c) => (\r\n          <Row key={c}>\r\n            <div>\r\n              <Button\r\n                size=\"sm\"\r\n                color=\"link\"\r\n                type=\"reset\"\r\n                onClick={handleClick}\r\n                id={i.assessment_id}\r\n                name={i.customer}\r\n              >\r\n                {`${i.customer} - ${statusMap[i.status]}`}\r\n              </Button>\r\n            </div>\r\n          </Row>\r\n        ))\r\n      ) : (\r\n        <LoadingBlock />\r\n      )}\r\n    </CardBody>\r\n  );\r\n}\r\n\r\nexport default VendorDashboardContent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}