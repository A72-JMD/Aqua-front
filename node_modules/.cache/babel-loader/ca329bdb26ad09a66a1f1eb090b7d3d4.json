{"ast":null,"code":"var _jsxFileName = \"/Users/JMD/Developments/Projects/Fiji-Web/src/views/Test/formTest.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Auth, API } from \"aws-amplify\";\nimport DynamicForm from \"../../components/DynamicForm/DynamicForm\";\nimport { Row } from \"reactstrap\";\nimport LoadingBlock from \"../../components/loadingBlock/loadingBlock\";\nimport { apiGET, apiPOST } from \"../../Common/Api/apiHelper\";\nimport queryString from \"query-string\";\nfunction FormTest(props) {\n  const [formTitle, setFormTitle] = useState(\"Vendor Assessment\"); //eslint-disable-line\n  const [formModel, setForm] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [pageReady, setPageReady] = useState(false);\n  const [maxPages, setMaxPages] = useState(1);\n  const mock = [{\n    category: \"Information Security Governance, Policy, Compliance\",\n    key: \"04c07082-2ab4-11ea-9476-ae3e727d6468\",\n    label: \"mock question required\",\n    order: 1,\n    tier: 1,\n    type: \"text\",\n    value: \"\",\n    validation: {\n      required: true,\n      length: 10\n    }\n  }, {\n    category: \"Information Security Governance, Policy, Compliance\",\n    key: \"ae3e727d6468-2ab4-11ea-9476-04c07082\",\n    label: \"mock question two\",\n    order: 1,\n    tier: 1,\n    type: \"text\",\n    value: \"\",\n    validation: {\n      required: false,\n      length: 13\n    }\n  }];\n  const mockFormModel = [{\n    label: \"Domain\",\n    subtext: \"Null\",\n    question_ref: \"ISABCM_77\",\n    key: \"domain\",\n    type: \"text\",\n    validations: [{\n      value: true,\n      rulename: \"mandatory\",\n      errormsg: \"This question is required.\"\n    }],\n    dependencies: [],\n    value: \"\"\n  }];\n  useEffect(() => {\n    onLoad();\n  }, []); // eslint-disable-line\n\n  const onLoad = async () => {\n    setForm(mockFormModel);\n    console.log(\"props.match.params.id\");\n    let params = queryString.parse(props.location.search);\n    console.log(params);\n    console.log(params.jwt ? true : false);\n    console.log(props);\n    setPageReady(true);\n    await getData().then(data => {\n      setIsLoading(false);\n      setPageReady(true);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  // Pull out into a generic reusable function\n  const getData = async () => {\n    console.log(\"got here\");\n    return await apiGET(\"/test_lambda\");\n  };\n  const postData = async body => {\n    setIsLoading(true);\n    var result = await apiPOST(\"/test_lambda\", body);\n    setIsLoading(false);\n    return result;\n  };\n  const handleSubmit = async model => {\n    console.log(\"submittedHere\");\n    console.log(model);\n    postData(model);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"animated fadeIn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, pageReady ? /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DynamicForm, {\n    className: \"form\",\n    model: formModel,\n    onSubmit: model => {\n      handleSubmit(model);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  })) : /*#__PURE__*/React.createElement(LoadingBlock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }));\n}\nexport default FormTest;","map":{"version":3,"names":["React","useState","useEffect","Auth","API","DynamicForm","Row","LoadingBlock","apiGET","apiPOST","queryString","FormTest","props","formTitle","setFormTitle","formModel","setForm","isLoading","setIsLoading","pageReady","setPageReady","maxPages","setMaxPages","mock","category","key","label","order","tier","type","value","validation","required","length","mockFormModel","subtext","question_ref","validations","rulename","errormsg","dependencies","onLoad","console","log","params","parse","location","search","jwt","getData","then","data","catch","error","postData","body","result","handleSubmit","model","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit"],"sources":["/Users/JMD/Developments/Projects/Fiji-Web/src/views/Test/formTest.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Auth, API } from \"aws-amplify\";\r\nimport DynamicForm from \"../../components/DynamicForm/DynamicForm\";\r\nimport { Row } from \"reactstrap\";\r\nimport LoadingBlock from \"../../components/loadingBlock/loadingBlock\";\r\nimport { apiGET, apiPOST } from \"../../Common/Api/apiHelper\";\r\nimport queryString from \"query-string\";\r\n\r\nfunction FormTest(props) {\r\n  const [formTitle, setFormTitle] = useState(\"Vendor Assessment\"); //eslint-disable-line\r\n  const [formModel, setForm] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [pageReady, setPageReady] = useState(false);\r\n  const [maxPages, setMaxPages] = useState(1);\r\n\r\n  const mock = [\r\n    {\r\n      category: \"Information Security Governance, Policy, Compliance\",\r\n      key: \"04c07082-2ab4-11ea-9476-ae3e727d6468\",\r\n      label: \"mock question required\",\r\n      order: 1,\r\n      tier: 1,\r\n      type: \"text\",\r\n      value: \"\",\r\n      validation: {\r\n        required: true,\r\n        length: 10\r\n      }\r\n    },\r\n    {\r\n      category: \"Information Security Governance, Policy, Compliance\",\r\n      key: \"ae3e727d6468-2ab4-11ea-9476-04c07082\",\r\n      label: \"mock question two\",\r\n      order: 1,\r\n      tier: 1,\r\n      type: \"text\",\r\n      value: \"\",\r\n      validation: {\r\n        required: false,\r\n        length: 13\r\n      }\r\n    }\r\n  ];\r\n\r\n  const mockFormModel = [\r\n    {\r\n      label: \"Domain\",\r\n      subtext: \"Null\",\r\n      question_ref: \"ISABCM_77\",\r\n      key: \"domain\",\r\n      type: \"text\",\r\n      validations: [\r\n        {\r\n          value: true,\r\n          rulename: \"mandatory\",\r\n          errormsg: \"This question is required.\"\r\n        }\r\n      ],\r\n      dependencies: [],\r\n      value: \"\"\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    onLoad();\r\n  }, []); // eslint-disable-line\r\n\r\n  const onLoad = async () => {\r\n    setForm(mockFormModel);\r\n\r\n    console.log(\"props.match.params.id\");\r\n    let params = queryString.parse(props.location.search);\r\n    console.log(params);\r\n    console.log(params.jwt ? true : false);\r\n    console.log(props);\r\n\r\n    setPageReady(true);\r\n    await getData()\r\n      .then(data => {\r\n        setIsLoading(false);\r\n        setPageReady(true);\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n  };\r\n\r\n  // Pull out into a generic reusable function\r\n  const getData = async () => {\r\n    console.log(\"got here\");\r\n    return await apiGET(`/test_lambda`);\r\n  };\r\n\r\n  const postData = async body => {\r\n    setIsLoading(true);\r\n    var result = await apiPOST(`/test_lambda`, body);\r\n    setIsLoading(false);\r\n    return result;\r\n  };\r\n\r\n  const handleSubmit = async model => {\r\n    console.log(\"submittedHere\");\r\n    console.log(model);\r\n\r\n    postData(model);\r\n  };\r\n\r\n  return (\r\n    <div className=\"animated fadeIn\">\r\n      {pageReady ? (\r\n        <Row>\r\n          <DynamicForm\r\n            className=\"form\"\r\n            model={formModel}\r\n            onSubmit={model => {\r\n              handleSubmit(model);\r\n            }}\r\n          />\r\n        </Row>\r\n      ) : (\r\n        <LoadingBlock />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FormTest;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}