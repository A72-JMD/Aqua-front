{"ast":null,"code":"var _jsxFileName = \"/Users/JMD/Developments/Projects/Aqua/Aqua-front/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter, Switch, withRouter } from \"react-router-dom\";\nimport { Auth } from \"aws-amplify\";\n// import { renderRoutes } from 'react-router-config';\nimport \"./App.scss\";\nimport UnauthenticatedRoute from \"./components/UnauthenticatedRoute/UnauthenticatedRoute\";\nimport AuthenticatedRoute from \"./components/AuthenticatedRoute/AuthenticatedRoute\";\nimport { GetUserDetails } from \"./Common/Auth/UserDetails\";\nfunction App(props) {\n  // let { id } = useParams();\n  // const [userGroups, setUserGroups] = useState([]);\n  const [userDetails, setUserDetails] = useState(GetUserDetails());\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n\n  //const [testState, setTestSTate] = useState(\"teststring\");\n\n  const signOut = async () => {\n    console.log(\"Signing out.\");\n    await Auth.signOut() // { global: true }\n    .then(data => console.log(data)).catch(err => console.log(err));\n    updateAuthStatus(false);\n    console.log(\"signed out.\");\n  };\n  useEffect(() => {\n    onLoad();\n  }, []); //eslint-disable-line\n\n  // useEffect(() => {\n  //   console.log(\"userdetails\");\n  //   console.log(userDetails);\n  // }, [userDetails]);\n\n  // useEffect(() => {\n  //   console.log(\"App Authed: \" + isAuthenticated);\n  // }, [isAuthenticated]);\n\n  async function onLoad() {\n    try {\n      var currentSession = await Auth.currentSession();\n      var user = await Auth.currentAuthenticatedUser();\n      // console.log(\"user\");\n      // console.log(user);\n      // console.log(\"Current Session\");\n      // console.log(currentSession);\n      setUserDetails(await GetUserDetails());\n      updateAuthStatus(true);\n    } catch (e) {\n      if (e !== \"No current user\") {\n        alert(e);\n      }\n    }\n  }\n  const updateAuthStatus = async status => {\n    userHasAuthenticated(status);\n    setUserDetails(await GetUserDetails());\n  };\n  const loading = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"animated fadeIn pt-3 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, \"Loading...\");\n\n  // Containers\n  const DefaultLayout = React.lazy(() => import(\"./containers/DefaultLayout\"));\n\n  // Pages\n  const Login = React.lazy(() => import(\"./views/Pages/Login\"));\n  const Register = React.lazy(() => import(\"./views/Pages/Register\"));\n  const RegisterVendor = React.lazy(() => import(\"./views/Pages/RegisterVendor\"));\n  const Page404 = React.lazy(() => import(\"./views/Pages/Page404\"));\n  const Page500 = React.lazy(() => import(\"./views/Pages/Page500\"));\n\n  // async function handleLogout() {\n  //   await Auth.signout();\n\n  //   userHasAuthenticated(false);\n  //   console.log(\"Handling Logout\");\n  //   this.props.history.push(\"/login\");\n  // }\n\n  // console.log(\"isAuthenticated\");\n  // console.log(isAuthenticated);\n  // All App props go in here so that they can be correctly passed through the authenticated or unauthenticated components\n  const appProps = {\n    isAuthenticated: isAuthenticated,\n    updateAuthStatus: updateAuthStatus,\n    onLogout: signOut,\n    userDetails: userDetails\n  };\n  return /*#__PURE__*/React.createElement(BrowserRouter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(React.Suspense, {\n    fallback: loading(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n    exact: true,\n    path: \"/login\",\n    name: \"Login Page\",\n    component: Login,\n    appProps: appProps,\n    props: props,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n    exact: true,\n    path: \"/register\",\n    name: \"Register Page\",\n    component: Register,\n    appProps: appProps,\n    props: props,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n    exact: true,\n    path: \"/registervendor\",\n    name: \"Register Vendor Page\",\n    component: RegisterVendor,\n    appProps: appProps,\n    props: props,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n    exact: true,\n    path: \"/404\",\n    name: \"Page 404\",\n    component: Page404,\n    appProps: appProps,\n    props: props,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n    exact: true,\n    path: \"/500\",\n    name: \"Page 500\",\n    component: Page500,\n    appProps: appProps,\n    props: props,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(AuthenticatedRoute, Object.assign({\n    path: \"/\",\n    name: \"Home\",\n    component: DefaultLayout,\n    appProps: appProps\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n    component: Page404,\n    appProps: appProps,\n    props: props,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }))));\n}\nexport default withRouter(App);","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Switch","withRouter","Auth","UnauthenticatedRoute","AuthenticatedRoute","GetUserDetails","App","props","userDetails","setUserDetails","isAuthenticated","userHasAuthenticated","signOut","console","log","then","data","catch","err","updateAuthStatus","onLoad","currentSession","user","currentAuthenticatedUser","e","alert","status","loading","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","DefaultLayout","lazy","Login","Register","RegisterVendor","Page404","Page500","appProps","onLogout","Suspense","fallback","exact","path","name","component","Object","assign"],"sources":["/Users/JMD/Developments/Projects/Aqua/Aqua-front/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter, Switch, withRouter } from \"react-router-dom\";\r\nimport { Auth } from \"aws-amplify\";\r\n// import { renderRoutes } from 'react-router-config';\r\nimport \"./App.scss\";\r\nimport UnauthenticatedRoute from \"./components/UnauthenticatedRoute/UnauthenticatedRoute\";\r\nimport AuthenticatedRoute from \"./components/AuthenticatedRoute/AuthenticatedRoute\";\r\nimport { GetUserDetails } from \"./Common/Auth/UserDetails\";\r\n\r\nfunction App(props) {\r\n  // let { id } = useParams();\r\n  // const [userGroups, setUserGroups] = useState([]);\r\n  const [userDetails, setUserDetails] = useState(GetUserDetails());\r\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\r\n\r\n  //const [testState, setTestSTate] = useState(\"teststring\");\r\n\r\n  const signOut = async () => {\r\n    console.log(\"Signing out.\");\r\n    await Auth.signOut() // { global: true }\r\n      .then(data => console.log(data))\r\n      .catch(err => console.log(err));\r\n    updateAuthStatus(false);\r\n    console.log(\"signed out.\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    onLoad();\r\n  }, []); //eslint-disable-line\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"userdetails\");\r\n  //   console.log(userDetails);\r\n  // }, [userDetails]);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"App Authed: \" + isAuthenticated);\r\n  // }, [isAuthenticated]);\r\n\r\n  async function onLoad() {\r\n    try {\r\n      var currentSession = await Auth.currentSession();\r\n      var user = await Auth.currentAuthenticatedUser();\r\n      // console.log(\"user\");\r\n      // console.log(user);\r\n      // console.log(\"Current Session\");\r\n      // console.log(currentSession);\r\n      setUserDetails(await GetUserDetails());\r\n      updateAuthStatus(true);\r\n    } catch (e) {\r\n      if (e !== \"No current user\") {\r\n        alert(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  const updateAuthStatus = async status => {\r\n    userHasAuthenticated(status);\r\n    setUserDetails(await GetUserDetails());\r\n  };\r\n  const loading = () => (\r\n    <div className=\"animated fadeIn pt-3 text-center\">Loading...</div>\r\n  );\r\n\r\n  // Containers\r\n  const DefaultLayout = React.lazy(() => import(\"./containers/DefaultLayout\"));\r\n\r\n  // Pages\r\n  const Login = React.lazy(() => import(\"./views/Pages/Login\"));\r\n  const Register = React.lazy(() => import(\"./views/Pages/Register\"));\r\n  const RegisterVendor = React.lazy(() =>\r\n    import(\"./views/Pages/RegisterVendor\")\r\n  );\r\n  const Page404 = React.lazy(() => import(\"./views/Pages/Page404\"));\r\n  const Page500 = React.lazy(() => import(\"./views/Pages/Page500\"));\r\n\r\n  // async function handleLogout() {\r\n  //   await Auth.signout();\r\n\r\n  //   userHasAuthenticated(false);\r\n  //   console.log(\"Handling Logout\");\r\n  //   this.props.history.push(\"/login\");\r\n  // }\r\n\r\n  // console.log(\"isAuthenticated\");\r\n  // console.log(isAuthenticated);\r\n  // All App props go in here so that they can be correctly passed through the authenticated or unauthenticated components\r\n  const appProps = {\r\n    isAuthenticated: isAuthenticated,\r\n    updateAuthStatus: updateAuthStatus,\r\n    onLogout: signOut,\r\n    userDetails: userDetails\r\n  };\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <React.Suspense fallback={loading()}>\r\n        <Switch>\r\n          <UnauthenticatedRoute\r\n            exact\r\n            path=\"/login\"\r\n            name=\"Login Page\"\r\n            component={Login}\r\n            appProps={appProps}\r\n            props={props}\r\n          />\r\n          <UnauthenticatedRoute\r\n            exact\r\n            path=\"/register\"\r\n            name=\"Register Page\"\r\n            component={Register}\r\n            appProps={appProps}\r\n            props={props}\r\n          />\r\n          <UnauthenticatedRoute\r\n            exact\r\n            path=\"/registervendor\"\r\n            name=\"Register Vendor Page\"\r\n            component={RegisterVendor}\r\n            appProps={appProps}\r\n            props={props}\r\n          />\r\n          <UnauthenticatedRoute\r\n            exact\r\n            path=\"/404\"\r\n            name=\"Page 404\"\r\n            component={Page404}\r\n            appProps={appProps}\r\n            props={props}\r\n          />\r\n          <UnauthenticatedRoute\r\n            exact\r\n            path=\"/500\"\r\n            name=\"Page 500\"\r\n            component={Page500}\r\n            appProps={appProps}\r\n            props={props}\r\n          />\r\n          <AuthenticatedRoute\r\n            path=\"/\"\r\n            name=\"Home\"\r\n            component={DefaultLayout}\r\n            appProps={appProps}\r\n            {...props}\r\n          />\r\n          <UnauthenticatedRoute\r\n            component={Page404}\r\n            appProps={appProps}\r\n            props={props}\r\n          />\r\n        </Switch>\r\n      </React.Suspense>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}